<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Some_examples | Blaine&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="åç¨‹äº¤æ›¿æ‰“å° a1b2c3&hellip; package main import ( &#34;fmt&#34; &#34;sync&#34; ) func main() { var wg sync.WaitGroup wg.Add(1) chNumber := make(chan struct{}) chLetter := make(chan struct{}) i := 1 index := 0 a := &#34;&#34; for c := &#39;a&#39;; c &lt;= &#39;z&#39;; c&#43;&#43; { a = a &#43; string(c) } go func() { for { select { case &lt;-chNumber: fmt.Print(i) i&#43;&#43; chLetter &lt;- struct{}{} break default: break } } }() go func(wg *sync.WaitGroup) { for { select { case &lt;-chLetter: if index &gt; len(a)-1 { wg.Done() return } fmt.Print(string(a[index])) index&#43;&#43; chNumber &lt;- struct{}{} break default: break } } }(&amp;wg) chLetter &lt;- struct{}{} wg.Wait() } å¹¶å‘3ä¸ªå‡½æ•° f1()(int[],error),f2()(int[">
<meta name="author" content="Blaine">
<link rel="canonical" href="https://Bin-lin-rgb.github.io/posts/go/some_examples/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.js" onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://Bin-lin-rgb.github.io/img/icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://Bin-lin-rgb.github.io/img/icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://Bin-lin-rgb.github.io/img/icon.png">
<link rel="apple-touch-icon" href="https://Bin-lin-rgb.github.io/img/icon.png">
<link rel="mask-icon" href="https://Bin-lin-rgb.github.io/img/icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script defer src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="Some_examples" />
<meta property="og:description" content="åç¨‹äº¤æ›¿æ‰“å° a1b2c3&hellip; package main import ( &#34;fmt&#34; &#34;sync&#34; ) func main() { var wg sync.WaitGroup wg.Add(1) chNumber := make(chan struct{}) chLetter := make(chan struct{}) i := 1 index := 0 a := &#34;&#34; for c := &#39;a&#39;; c &lt;= &#39;z&#39;; c&#43;&#43; { a = a &#43; string(c) } go func() { for { select { case &lt;-chNumber: fmt.Print(i) i&#43;&#43; chLetter &lt;- struct{}{} break default: break } } }() go func(wg *sync.WaitGroup) { for { select { case &lt;-chLetter: if index &gt; len(a)-1 { wg.Done() return } fmt.Print(string(a[index])) index&#43;&#43; chNumber &lt;- struct{}{} break default: break } } }(&amp;wg) chLetter &lt;- struct{}{} wg.Wait() } å¹¶å‘3ä¸ªå‡½æ•° f1()(int[],error),f2()(int[" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Bin-lin-rgb.github.io/posts/go/some_examples/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-06T20:09:45+08:00" />
<meta property="article:modified_time" content="2023-11-06T20:09:45+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Some_examples"/>
<meta name="twitter:description" content="åç¨‹äº¤æ›¿æ‰“å° a1b2c3&hellip; package main import ( &#34;fmt&#34; &#34;sync&#34; ) func main() { var wg sync.WaitGroup wg.Add(1) chNumber := make(chan struct{}) chLetter := make(chan struct{}) i := 1 index := 0 a := &#34;&#34; for c := &#39;a&#39;; c &lt;= &#39;z&#39;; c&#43;&#43; { a = a &#43; string(c) } go func() { for { select { case &lt;-chNumber: fmt.Print(i) i&#43;&#43; chLetter &lt;- struct{}{} break default: break } } }() go func(wg *sync.WaitGroup) { for { select { case &lt;-chLetter: if index &gt; len(a)-1 { wg.Done() return } fmt.Print(string(a[index])) index&#43;&#43; chNumber &lt;- struct{}{} break default: break } } }(&amp;wg) chLetter &lt;- struct{}{} wg.Wait() } å¹¶å‘3ä¸ªå‡½æ•° f1()(int[],error),f2()(int["/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "ğŸ“šæ–‡ç« ",
          "item": "https://Bin-lin-rgb.github.io/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "ğŸ¥‡ Golang",
          "item": "https://Bin-lin-rgb.github.io/posts/go/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Some_examples",
      "item": "https://Bin-lin-rgb.github.io/posts/go/some_examples/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Some_examples",
  "name": "Some_examples",
  "description": "åç¨‹äº¤æ›¿æ‰“å° a1b2c3\u0026hellip; package main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; ) func main() { var wg sync.WaitGroup wg.Add(1) chNumber := make(chan struct{}) chLetter := make(chan struct{}) i := 1 index := 0 a := \u0026#34;\u0026#34; for c := \u0026#39;a\u0026#39;; c \u0026lt;= \u0026#39;z\u0026#39;; c++ { a = a + string(c) } go func() { for { select { case \u0026lt;-chNumber: fmt.Print(i) i++ chLetter \u0026lt;- struct{}{} break default: break } } }() go func(wg *sync.WaitGroup) { for { select { case \u0026lt;-chLetter: if index \u0026gt; len(a)-1 { wg.Done() return } fmt.Print(string(a[index])) index++ chNumber \u0026lt;- struct{}{} break default: break } } }(\u0026amp;wg) chLetter \u0026lt;- struct{}{} wg.Wait() } å¹¶å‘3ä¸ªå‡½æ•° f1()(int[],error),f2()(int[",
  "keywords": [
    ""
  ],
  "articleBody": "åç¨‹äº¤æ›¿æ‰“å° a1b2c3â€¦ package main import ( \"fmt\" \"sync\" ) func main() { var wg sync.WaitGroup wg.Add(1) chNumber := make(chan struct{}) chLetter := make(chan struct{}) i := 1 index := 0 a := \"\" for c := 'a'; c \u003c= 'z'; c++ { a = a + string(c) } go func() { for { select { case \u003c-chNumber: fmt.Print(i) i++ chLetter \u003c- struct{}{} break default: break } } }() go func(wg *sync.WaitGroup) { for { select { case \u003c-chLetter: if index \u003e len(a)-1 { wg.Done() return } fmt.Print(string(a[index])) index++ chNumber \u003c- struct{}{} break default: break } } }(\u0026wg) chLetter \u003c- struct{}{} wg.Wait() } å¹¶å‘3ä¸ªå‡½æ•° f1()(int[],error),f2()(int[],error),f3()(int[],error)å…±ä¸‰ä¸ªå‡½æ•°ï¼Œè¯·ä½¿ç”¨ go channel å¹¶å‘è¿™ä¸‰ä¸ªå‡½æ•°å¹¶ä¸”å°†ç»“æœæ”¶é›†èµ·æ¥å»é‡ã€‚\npackage main import ( \"fmt\" \"sync\" ) func f1() ([]int, error) { return []int{1, 2, 3}, nil } func f2() ([]int, error) { return []int{3, 4, 5}, nil } func f3() ([]int, error) { return []int{5, 6, 7}, nil } func main() { var wg sync.WaitGroup resultCh := make(chan []int) seen := make(map[int]bool) mu := sync.Mutex{} call := func(f func() ([]int, error)) { defer wg.Done() data, err := f() if err != nil { fmt.Println(\"Error:\", err) return } // å»é‡ mu.Lock() defer mu.Unlock() for _, v := range data { if !seen[v] { seen[v] = true resultCh \u003c- []int{v} } } } wg.Add(3) go call(f1) go call(f2) go call(f3) go func() { wg.Wait() close(resultCh) }() // ä» channel ä¸­è¯»å–ç»“æœ for result := range resultCh { fmt.Println(\"Result:\", result) } } åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ n ä¸ªå…ƒç´  è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ‡ç‰‡å’Œä¸€ä¸ªç´¢å¼• nï¼Œç„¶ååˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ n ä¸ªå…ƒç´ ã€‚\npackage main import \"fmt\" func removeElement(slice []int, n int) []int { // æ£€æŸ¥ç´¢å¼•æ˜¯å¦åœ¨åˆ‡ç‰‡èŒƒå›´å†… if n \u003c 0 || n \u003e= len(slice) { fmt.Println(\"Index out of range.\") return slice } // å°†ç´¢å¼• n ä¹‹åçš„å…ƒç´ å¤åˆ¶åˆ°äº†ç´¢å¼• n çš„ä½ç½®ï¼Œç›¸å½“äºæŠŠ n+1ã€n+2ã€... ç­‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œè¦†ç›–äº†ç´¢å¼• n çš„å…ƒç´  copy(slice[n:], slice[n+1:]) // ç¼©çŸ­åˆ‡ç‰‡ï¼Œåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´  return slice[:len(slice)-1] } func main() { // ç¤ºä¾‹åˆ‡ç‰‡ mySlice := []int{1, 2, 3, 4, 5} // åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ 2 ä¸ªå…ƒç´  result := removeElement(mySlice, 2) // æ‰“å°ç»“æœ fmt.Println(result) } æˆ–è€…ä½¿ç”¨ append()\nfunc removeElement(slice []int, n int) []int { // æ£€æŸ¥ç´¢å¼•æ˜¯å¦åœ¨åˆ‡ç‰‡èŒƒå›´å†… if n \u003c 0 || n \u003e= len(slice) { fmt.Println(\"Index out of range.\") return slice } // å¤åˆ¶ç´¢å¼• n ä¹‹å‰çš„å…ƒç´  result := append([]int{}, slice[:n]...) // å¤åˆ¶ç´¢å¼• n+1 ä¹‹åçš„å…ƒç´  result = append(result, slice[n+1:]...) // ç¼©çŸ­åˆ‡ç‰‡ï¼Œåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´  return result } map äº¤å¹¶é›† è®¾è®¡2ä¸ªgoå‡½æ•°ï¼Œå®ç°è¾“å…¥aã€bä¸¤ä¸ªmapï¼Œè¾“å‡ºä¸€ä¸ªcçš„mapï¼Œåˆ†åˆ«å®ç°äº¤é›†å’Œå¹¶é›†ã€‚\npackage main import ( \"fmt\" ) // Intersection è®¡ç®—ä¸¤ä¸ª map çš„äº¤é›† func Intersection(a, b map[string]int) map[string]int { result := make(map[string]int) for key, valueA := range a { if valueB, ok := b[key]; ok { result[key] = valueA + valueB } } return result } // Union è®¡ç®—ä¸¤ä¸ª map çš„å¹¶é›† func Union(a, b map[string]int) map[string]int { result := make(map[string]int) // å°† map a å¤åˆ¶åˆ°ç»“æœä¸­ for key, value := range a { result[key] = value } // å°† map b å¤åˆ¶åˆ°ç»“æœä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒçš„é”®ï¼Œåˆ™ç´¯åŠ å€¼ for key, value := range b { if existingValue, ok := result[key]; ok { result[key] = existingValue + value } else { result[key] = value } } return result } func main() { // ç¤ºä¾‹ map mapA := map[string]int{\"apple\": 3, \"banana\": 2, \"orange\": 1} mapB := map[string]int{\"banana\": 1, \"orange\": 2, \"grape\": 4} // è®¡ç®—å¹¶è¾“å‡ºäº¤é›† intersection := Intersection(mapA, mapB) fmt.Println(\"Intersection:\", intersection) // è®¡ç®—å¹¶è¾“å‡ºå¹¶é›† union := Union(mapA, mapB) fmt.Println(\"Union:\", union) } panic å’Œ defer package main import ( \"fmt\" ) func main() { defer func() { fmt.Println(\"æ‰“å° 1\") }() defer func() { fmt.Println(\"æ‰“å° 2\") }() defer func() { fmt.Println(\"æ‰“å° 3\") }() panic(\"æ‰“å° 4\") } panic(â€œæ‰“å° 4â€) ä¼šå¯¼è‡´ç¨‹åºå‘ç”Ÿ panicã€‚å½“ panic å‘ç”Ÿæ—¶ï¼ŒGo è¯­è¨€ä¼šç«‹å³åœæ­¢å½“å‰å‡½æ•°çš„æ‰§è¡Œï¼Œä½†ä¼šæ‰§è¡Œè¯¥å‡½æ•°ä¸­çš„æ‰€æœ‰ defer è¯­å¥ï¼Œç„¶åå°†æ§åˆ¶æƒä¼ é€’ç»™è°ƒç”¨è¯¥å‡½æ•°çš„å‡½æ•°ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°è¾¾åˆ°äº†ç¨‹åºçš„æœ€é¡¶å±‚ï¼Œæ­¤æ—¶ç¨‹åºä¼šç»ˆæ­¢å¹¶è¾“å‡º panic çš„ä¿¡æ¯ã€‚\nåœ¨ä½ çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶å‘ç”Ÿäº† panicï¼Œä½†æ˜¯ç”±äºåœ¨æ¯ä¸ª defer è¯­å¥ä¸­éƒ½æœ‰è¾“å‡ºï¼Œæ‰€ä»¥æ¯ä¸ª defer è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚ç”±äº defer æ˜¯åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„é¡ºåº å› æ­¤ï¼Œç¨‹åºçš„è¾“å‡ºç»“æœå°†æ˜¯ï¼š\næ‰“å° 3 æ‰“å° 2 æ‰“å° 1 panic: æ‰“å° 4 select å’Œ channel package main import ( \"fmt\" ) func main() { ch1 := make(chan int, 1) ch2 := make(chan string, 1) ch1 \u003c- 1 ch2 \u003c- \"Hello\" select { case x := \u003c-ch1: fmt.Println(x) case y := \u003c-ch2: fmt.Println(y) } } è¿™åªä¼šé€‰æ‹©ä¸€ä¸ª case éšæœºæ‰“å°ï¼Œè‹¥æœæƒ³æ‰§è¡Œå¤šä¸ª case ï¼Œå¯ä»¥ä½¿ç”¨ for\nfunc main() { ch1 := make(chan int, 1) ch2 := make(chan string, 1) ch1 \u003c- 1 ch2 \u003c- \"Hello\" for { select { case x := \u003c-ch1: fmt.Println(\"Received from ch1:\", x) case y := \u003c-ch2: fmt.Println(\"Received from ch2:\", y) default: // å¦‚æœæ²¡æœ‰é€šé“å°±ç»ªï¼Œé€€å‡ºå¾ªç¯ return } } } Slice çš„ä¼ é€’ å…ˆæ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç è¾“å‡ºä»€ä¹ˆï¼š\npackage main import ( \"fmt\" ) func add(arr []int) { arr = append(arr, 10) } func modify(arr []int) { arr[0] = 10 } func main() { array := []int{1, 2, 3} fmt.Println(array) add(array) fmt.Println(array) fmt.Println(\"--------------------\") fmt.Println(array) modify(array) fmt.Println(array) } åœ¨è¿™é‡Œï¼Œä½ æœ‰ä¸¤ä¸ªå‡½æ•°addå’Œmodifyï¼Œå®ƒä»¬éƒ½æ¥æ”¶ä¸€ä¸ªåˆ‡ç‰‡ä½œä¸ºå‚æ•°ã€‚æˆ‘å°†åˆ†åˆ«è§£é‡Šå®ƒä»¬çš„è¡Œä¸ºã€‚\nadd å‡½æ•°: è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯å°†ä¸€ä¸ªæ•´æ•°10è¿½åŠ åˆ°ä¼ å…¥çš„åˆ‡ç‰‡arrçš„æœ«å°¾ã€‚ç„¶è€Œï¼Œè¿™é‡Œçš„arræ˜¯ä¼ é€’è¿›æ¥çš„åˆ‡ç‰‡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œappendæ“ä½œå¯¹å‰¯æœ¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†è¿™å¯¹åŸå§‹åˆ‡ç‰‡æ²¡æœ‰å½±å“ï¼Œå› ä¸ºarråªæ˜¯ä¼ é€’è¿›æ¥çš„å‰¯æœ¬ã€‚å½“å‡½æ•°è¿”å›æ—¶ï¼Œå¯¹åŸå§‹åˆ‡ç‰‡æ²¡æœ‰åšä»»ä½•æ›´æ”¹ã€‚\nmodify å‡½æ•°:è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯å°†ä¼ å…¥åˆ‡ç‰‡arrçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¿®æ”¹ä¸º10ã€‚ä¸addä¸åŒï¼Œè¿™é‡Œä¿®æ”¹çš„æ˜¯åˆ‡ç‰‡ä¸­çš„åŸå§‹æ•°æ®ï¼Œå› ä¸ºåˆ‡ç‰‡æ˜¯å¼•ç”¨ä¼ é€’ã€‚å³ä½¿æˆ‘ä»¬ä¼ é€’çš„æ˜¯åˆ‡ç‰‡çš„å‰¯æœ¬ï¼Œç”±äºåº•å±‚æ•°æ®æ˜¯å…±äº«çš„ï¼Œå¯¹å‰¯æœ¬çš„ä¿®æ”¹ä¼šå½±å“åŸå§‹åˆ‡ç‰‡ã€‚æ‰€ä»¥ï¼Œå½“modifyå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼ŒåŸå§‹åˆ‡ç‰‡ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º10ã€‚\nåœ¨mainå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥æµ‹è¯•è¿™ä¸¤ä¸ªå‡½æ•°çš„æ•ˆæœï¼š\n[1 2 3] [1 2 3] -------------------- [1 2 3] [10 2 3] æ€»ç»“ï¼šaddå‡½æ•°å¯¹ä¼ å…¥çš„åˆ‡ç‰‡å‰¯æœ¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†æ²¡æœ‰å½±å“åŸå§‹åˆ‡ç‰‡ï¼›è€Œmodifyå‡½æ•°é€šè¿‡å¼•ç”¨ä¿®æ”¹äº†åŸå§‹åˆ‡ç‰‡çš„æ•°æ®ã€‚\nstrconv è½¬æ¢ strconvåŒ…å®ç°äº†åŸºæœ¬æ•°æ®ç±»å‹ä¸å…¶å­—ç¬¦ä¸²è¡¨ç¤ºçš„è½¬æ¢ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å¸¸ç”¨å‡½æ•°ï¼š Atoi()ã€Itoa()ã€parseç³»åˆ—ã€formatç³»åˆ—ã€appendç³»åˆ—ã€‚\næ›´å¤šå‡½æ•°è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚\nstringä¸intç±»å‹è½¬æ¢ è¿™ä¸€ç»„å‡½æ•°æ˜¯æˆ‘ä»¬å¹³æ—¶ç¼–ç¨‹ä¸­ç”¨çš„æœ€å¤šçš„ã€‚\n1.1.2. Atoi()\nAtoi()å‡½æ•°ç”¨äºå°†å­—ç¬¦ä¸²ç±»å‹çš„æ•´æ•°è½¬æ¢ä¸ºintç±»å‹ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ã€‚\nfunc Atoi(s string) (i int, err error) å¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°æ— æ³•è½¬æ¢ä¸ºintç±»å‹ï¼Œå°±ä¼šè¿”å›é”™è¯¯ã€‚\ns1 := \"100\" i1, err := strconv.Atoi(s1) if err != nil { fmt.Println(\"can't convert to int\") } else { fmt.Printf(\"type:%T value:%#v\\n\", i1, i1) //type:int value:100 } 1.1.3. Itoa()\nItoa()å‡½æ•°ç”¨äºå°†intç±»å‹æ•°æ®è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå…·ä½“çš„å‡½æ•°ç­¾åå¦‚ä¸‹ã€‚\nfunc Itoa(i int) string ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\ni2 := 200 s2 := strconv.Itoa(i2) fmt.Printf(\"type:%T value:%#v\\n\", s2, s2) //type:string value:\"200\" Parseç³»åˆ—å‡½æ•° Parseç±»å‡½æ•°ç”¨äºè½¬æ¢å­—ç¬¦ä¸²ä¸ºç»™å®šç±»å‹çš„å€¼ï¼šParseBool()ã€ParseFloat()ã€ParseInt()ã€ParseUint()ã€‚\n1.1.6. ParseBool()\nfunc ParseBool(str string) (value bool, err error) è¿”å›å­—ç¬¦ä¸²è¡¨ç¤ºçš„boolå€¼ã€‚å®ƒæ¥å—1ã€0ã€tã€fã€Tã€Fã€trueã€falseã€Trueã€Falseã€TRUEã€FALSEï¼›å¦åˆ™è¿”å›é”™è¯¯ã€‚\n1.1.7. ParseInt()\nfunc ParseInt(s string, base int, bitSize int) (i int64, err error) è¿”å›å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•´æ•°å€¼ï¼Œæ¥å—æ­£è´Ÿå·ã€‚\nbaseæŒ‡å®šè¿›åˆ¶ï¼ˆ2åˆ°36ï¼‰ï¼Œå¦‚æœbaseä¸º0ï¼Œåˆ™ä¼šä»å­—ç¬¦ä¸²å‰ç½®åˆ¤æ–­ï¼Œâ€0xâ€æ˜¯16è¿›åˆ¶ï¼Œâ€0â€æ˜¯8è¿›åˆ¶ï¼Œå¦åˆ™æ˜¯10è¿›åˆ¶ï¼›\nbitSizeæŒ‡å®šç»“æœå¿…é¡»èƒ½æ— æº¢å‡ºèµ‹å€¼çš„æ•´æ•°ç±»å‹ï¼Œ0ã€8ã€16ã€32ã€64 åˆ†åˆ«ä»£è¡¨ intã€int8ã€int16ã€int32ã€int64ï¼›\nè¿”å›çš„erræ˜¯*NumErrç±»å‹çš„ï¼Œå¦‚æœè¯­æ³•æœ‰è¯¯ï¼Œerr.Error = ErrSyntaxï¼›å¦‚æœç»“æœè¶…å‡ºç±»å‹èŒƒå›´err.Error = ErrRangeã€‚\n1.1.8. ParseUnit()\nfunc ParseUint(s string, base int, bitSize int) (n uint64, err error) ParseUintç±»ä¼¼ParseIntä½†ä¸æ¥å—æ­£è´Ÿå·ï¼Œç”¨äºæ— ç¬¦å·æ•´å‹ã€‚\n1.1.9. ParseFloat()\nfunc ParseFloat(s string, bitSize int) (f float64, err error) è§£æä¸€ä¸ªè¡¨ç¤ºæµ®ç‚¹æ•°çš„å­—ç¬¦ä¸²å¹¶è¿”å›å…¶å€¼ã€‚\nå¦‚æœsåˆä¹è¯­æ³•è§„åˆ™ï¼Œå‡½æ•°ä¼šè¿”å›æœ€ä¸ºæ¥è¿‘sè¡¨ç¤ºå€¼çš„ä¸€ä¸ªæµ®ç‚¹æ•°ï¼ˆä½¿ç”¨IEEE754è§„èŒƒèˆå…¥ï¼‰ã€‚\nbitSizeæŒ‡å®šäº†æœŸæœ›çš„æ¥æ”¶ç±»å‹ï¼Œ32æ˜¯float32ï¼ˆè¿”å›å€¼å¯ä»¥ä¸æ”¹å˜ç²¾ç¡®å€¼çš„èµ‹å€¼ç»™float32ï¼‰ï¼Œ64æ˜¯float64ï¼›\nè¿”å›å€¼erræ˜¯*NumErrç±»å‹çš„ï¼Œè¯­æ³•æœ‰è¯¯çš„ï¼Œerr.Error=ErrSyntaxï¼›ç»“æœè¶…å‡ºè¡¨ç¤ºèŒƒå›´çš„ï¼Œè¿”å›å€¼fä¸ºÂ±Infï¼Œerr.Error= ErrRangeã€‚\n1.1.10. ä»£ç ç¤ºä¾‹\nb, err := strconv.ParseBool(\"true\") f, err := strconv.ParseFloat(\"3.1415\", 64) i, err := strconv.ParseInt(\"-2\", 10, 64) u, err := strconv.ParseUint(\"2\", 10, 64) è¿™äº›å‡½æ•°éƒ½æœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œç¬¬ä¸€ä¸ªè¿”å›å€¼æ˜¯è½¬æ¢åçš„å€¼ï¼Œç¬¬äºŒä¸ªè¿”å›å€¼ä¸ºè½¬åŒ–å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ã€‚\nFormatç³»åˆ—å‡½æ•° Formatç³»åˆ—å‡½æ•°å®ç°äº†å°†ç»™å®šç±»å‹æ•°æ®æ ¼å¼åŒ–ä¸ºstringç±»å‹æ•°æ®çš„åŠŸèƒ½ã€‚\n1.1.12. FormatBool()\nfunc FormatBool(b bool) string æ ¹æ®bçš„å€¼è¿”å›â€trueâ€æˆ–â€falseâ€ã€‚\n1.1.13. FormatInt()\nfunc FormatInt(i int64, base int) string è¿”å›içš„baseè¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚base å¿…é¡»åœ¨2åˆ°36ä¹‹é—´ï¼Œç»“æœä¸­ä¼šä½¿ç”¨å°å†™å­—æ¯â€™aâ€™åˆ°â€™zâ€™è¡¨ç¤ºå¤§äº10çš„æ•°å­—ã€‚\n1.1.14. FormatUint()\nfunc FormatUint(i uint64, base int) string æ˜¯FormatIntçš„æ— ç¬¦å·æ•´æ•°ç‰ˆæœ¬ã€‚\n1.1.15. FormatFloat()\nfunc FormatFloat(f float64, fmt byte, prec, bitSize int) string å‡½æ•°å°†æµ®ç‚¹æ•°è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›ã€‚\nbitSizeè¡¨ç¤ºfçš„æ¥æºç±»å‹ï¼ˆ32ï¼šfloat32ã€64ï¼šfloat64ï¼‰ï¼Œä¼šæ®æ­¤è¿›è¡Œèˆå…¥ã€‚\nfmtè¡¨ç¤ºæ ¼å¼ï¼šâ€™fâ€™ï¼ˆ-ddd.ddddï¼‰ã€â€™bâ€™ï¼ˆ-ddddpÂ±dddï¼ŒæŒ‡æ•°ä¸ºäºŒè¿›åˆ¶ï¼‰ã€â€™eâ€™ï¼ˆ-d.ddddeÂ±ddï¼Œåè¿›åˆ¶æŒ‡æ•°ï¼‰ã€â€™Eâ€™ï¼ˆ-d.ddddEÂ±ddï¼Œåè¿›åˆ¶æŒ‡æ•°ï¼‰ã€â€™gâ€™ï¼ˆæŒ‡æ•°å¾ˆå¤§æ—¶ç”¨â€™eâ€™æ ¼å¼ï¼Œå¦åˆ™â€™fâ€™æ ¼å¼ï¼‰ã€â€™Gâ€™ï¼ˆæŒ‡æ•°å¾ˆå¤§æ—¶ç”¨â€™Eâ€™æ ¼å¼ï¼Œå¦åˆ™â€™fâ€™æ ¼å¼ï¼‰ã€‚\nprecæ§åˆ¶ç²¾åº¦ï¼ˆæ’é™¤æŒ‡æ•°éƒ¨åˆ†ï¼‰ï¼šå¯¹â€™fâ€™ã€â€™eâ€™ã€â€™Eâ€™ï¼Œå®ƒè¡¨ç¤ºå°æ•°ç‚¹åçš„æ•°å­—ä¸ªæ•°ï¼›å¯¹â€™gâ€™ã€â€™Gâ€™ï¼Œå®ƒæ§åˆ¶æ€»çš„æ•°å­—ä¸ªæ•°ã€‚å¦‚æœprec ä¸º-1ï¼Œåˆ™ä»£è¡¨ä½¿ç”¨æœ€å°‘æ•°é‡çš„ã€ä½†åˆå¿…éœ€çš„æ•°å­—æ¥è¡¨ç¤ºfã€‚\n1.1.16. ä»£ç ç¤ºä¾‹\ns1 := strconv.FormatBool(true) s2 := strconv.FormatFloat(3.1415, 'E', -1, 64) s3 := strconv.FormatInt(-2, 16) s4 := strconv.FormatUint(2, 16) time åŒ…çš„ä½¿ç”¨ æ—¶é—´å’Œæ—¥æœŸæ˜¯æˆ‘ä»¬ç¼–ç¨‹ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ï¼Œä»¥ä¸‹ä»‹ç»äº†Goè¯­è¨€å†…ç½®çš„timeåŒ…çš„åŸºæœ¬ç”¨æ³•ã€‚\ntimeåŒ…æä¾›äº†æ—¶é—´çš„æ˜¾ç¤ºå’Œæµ‹é‡ç”¨çš„å‡½æ•°ã€‚æ—¥å†çš„è®¡ç®—é‡‡ç”¨çš„æ˜¯å…¬å†ã€‚\næ—¶é—´ç±»å‹\ntime.Timeç±»å‹è¡¨ç¤ºæ—¶é—´ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡time.Now()å‡½æ•°è·å–å½“å‰çš„æ—¶é—´å¯¹è±¡ï¼Œç„¶åè·å–æ—¶é—´å¯¹è±¡çš„å¹´æœˆæ—¥æ—¶åˆ†ç§’ç­‰ä¿¡æ¯ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nfunc timeDemo() { now := time.Now() //è·å–å½“å‰æ—¶é—´ fmt.Printf(\"current time:%v\\n\", now) year := now.Year() //å¹´ month := now.Month() //æœˆ day := now.Day() //æ—¥ hour := now.Hour() //å°æ—¶ minute := now.Minute() //åˆ†é’Ÿ second := now.Second() //ç§’ fmt.Printf(\"%d-%02d-%02d %02d:%02d:%02d\\n\", year, month, day, hour, minute, second) } æ—¶é—´æˆ³\næ—¶é—´æˆ³æ˜¯è‡ª1970å¹´1æœˆ1æ—¥ï¼ˆ08:00:00GMTï¼‰è‡³å½“å‰æ—¶é—´çš„æ€»æ¯«ç§’æ•°ã€‚å®ƒä¹Ÿè¢«ç§°ä¸ºUnixæ—¶é—´æˆ³ï¼ˆUnixTimestampï¼‰ã€‚\nåŸºäºæ—¶é—´å¯¹è±¡è·å–æ—¶é—´æˆ³çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nfunc timestampDemo() { now := time.Now() //è·å–å½“å‰æ—¶é—´ timestamp1 := now.Unix() //æ—¶é—´æˆ³ timestamp2 := now.UnixNano() //çº³ç§’æ—¶é—´æˆ³ fmt.Printf(\"current timestamp1:%v\\n\", timestamp1) fmt.Printf(\"current timestamp2:%v\\n\", timestamp2) } ä½¿ç”¨time.Unix()å‡½æ•°å¯ä»¥å°†æ—¶é—´æˆ³è½¬ä¸ºæ—¶é—´æ ¼å¼ã€‚\nfunc timestampDemo2(timestamp int64) { timeObj := time.Unix(timestamp, 0) //å°†æ—¶é—´æˆ³è½¬ä¸ºæ—¶é—´æ ¼å¼ fmt.Println(timeObj) year := timeObj.Year() //å¹´ month := timeObj.Month() //æœˆ day := timeObj.Day() //æ—¥ hour := timeObj.Hour() //å°æ—¶ minute := timeObj.Minute() //åˆ†é’Ÿ second := timeObj.Second() //ç§’ fmt.Printf(\"%d-%02d-%02d %02d:%02d:%02d\\n\", year, month, day, hour, minute, second) } æ—¶é—´é—´éš”\ntime.Durationæ˜¯timeåŒ…å®šä¹‰çš„ä¸€ä¸ªç±»å‹ï¼Œå®ƒä»£è¡¨ä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´ç»è¿‡çš„æ—¶é—´ï¼Œä»¥çº³ç§’ä¸ºå•ä½ã€‚time.Durationè¡¨ç¤ºä¸€æ®µæ—¶é—´é—´éš”ï¼Œå¯è¡¨ç¤ºçš„æœ€é•¿æ—¶é—´æ®µå¤§çº¦290å¹´ã€‚\ntimeåŒ…ä¸­å®šä¹‰çš„æ—¶é—´é—´éš”ç±»å‹çš„å¸¸é‡å¦‚ä¸‹ï¼š\nconst ( Nanosecond Duration = 1 Microsecond = 1000 * Nanosecond Millisecond = 1000 * Microsecond Second = 1000 * Millisecond Minute = 60 * Second Hour = 60 * Minute ) ä¾‹å¦‚ï¼štime.Durationè¡¨ç¤º1çº³ç§’ï¼Œtime.Secondè¡¨ç¤º1ç§’ã€‚\næ—¶é—´æ“ä½œ\n1ã€Add\næˆ‘ä»¬åœ¨æ—¥å¸¸çš„ç¼–ç è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°è¦æ±‚æ—¶é—´+æ—¶é—´é—´éš”çš„éœ€æ±‚ï¼ŒGoè¯­è¨€çš„æ—¶é—´å¯¹è±¡æœ‰æä¾›Addæ–¹æ³•å¦‚ä¸‹ï¼š\nfunc (t Time) Add(d Duration) Time ä¸¾ä¸ªä¾‹å­ï¼Œæ±‚ä¸€ä¸ªå°æ—¶ä¹‹åçš„æ—¶é—´ï¼š\nfunc main() { now := time.Now() later := now.Add(time.Hour) // å½“å‰æ—¶é—´åŠ 1å°æ—¶åçš„æ—¶é—´ fmt.Println(later) } 2ã€Sub\næ±‚ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„å·®å€¼ï¼š\nfunc (t Time) Sub(u Time) Duration è¿”å›ä¸€ä¸ªæ—¶é—´æ®µt-uã€‚å¦‚æœç»“æœè¶…å‡ºäº†Durationå¯ä»¥è¡¨ç¤ºçš„æœ€å¤§å€¼/æœ€å°å€¼ï¼Œå°†è¿”å›æœ€å¤§å€¼/æœ€å°å€¼ã€‚è¦è·å–æ—¶é—´ç‚¹t-dï¼ˆdä¸ºDurationï¼‰ï¼Œå¯ä»¥ä½¿ç”¨t.Add(-d)ã€‚\n3ã€Equal\nfunc (t Time) Equal(u Time) bool åˆ¤æ–­ä¸¤ä¸ªæ—¶é—´æ˜¯å¦ç›¸åŒï¼Œä¼šè€ƒè™‘æ—¶åŒºçš„å½±å“ï¼Œå› æ­¤ä¸åŒæ—¶åŒºæ ‡å‡†çš„æ—¶é—´ä¹Ÿå¯ä»¥æ­£ç¡®æ¯”è¾ƒã€‚æœ¬æ–¹æ³•å’Œç”¨t==uä¸åŒï¼Œè¿™ç§æ–¹æ³•è¿˜ä¼šæ¯”è¾ƒåœ°ç‚¹å’Œæ—¶åŒºä¿¡æ¯ã€‚\n4ã€Before\nfunc (t Time) Before(u Time) bool å¦‚æœtä»£è¡¨çš„æ—¶é—´ç‚¹åœ¨uä¹‹å‰ï¼Œè¿”å›çœŸï¼›å¦åˆ™è¿”å›å‡ã€‚\n5ã€After\nfunc (t Time) After(u Time) bool å¦‚æœtä»£è¡¨çš„æ—¶é—´ç‚¹åœ¨uä¹‹åï¼Œè¿”å›çœŸï¼›å¦åˆ™è¿”å›å‡ã€‚\n1.1.6. å®šæ—¶å™¨\nä½¿ç”¨time.Tick(æ—¶é—´é—´éš”)æ¥è®¾ç½®å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šé“ï¼ˆchannelï¼‰ã€‚\nfunc tickDemo() { ticker := time.Tick(time.Second) //å®šä¹‰ä¸€ä¸ª1ç§’é—´éš”çš„å®šæ—¶å™¨ for i := range ticker { fmt.Println(i)//æ¯ç§’éƒ½ä¼šæ‰§è¡Œçš„ä»»åŠ¡ } } 1.1.7. æ—¶é—´æ ¼å¼åŒ–\næ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªè‡ªå¸¦çš„æ–¹æ³•Formatè¿›è¡Œæ ¼å¼åŒ–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯Goè¯­è¨€ä¸­æ ¼å¼åŒ–æ—¶é—´æ¨¡æ¿ä¸æ˜¯å¸¸è§çš„Y-m-d H:M:Sè€Œæ˜¯ä½¿ç”¨Goçš„è¯ç”Ÿæ—¶é—´2006å¹´1æœˆ2å·15ç‚¹04åˆ†ï¼ˆè®°å¿†å£è¯€ä¸º2006 1 2 3 4ï¼‰ã€‚ä¹Ÿè®¸è¿™å°±æ˜¯æŠ€æœ¯äººå‘˜çš„æµªæ¼«å§ã€‚\nè¡¥å……ï¼šå¦‚æœæƒ³æ ¼å¼åŒ–ä¸º12å°æ—¶æ–¹å¼ï¼Œéœ€æŒ‡å®šPMã€‚\nfunc formatDemo() { now := time.Now() // æ ¼å¼åŒ–çš„æ¨¡æ¿ä¸ºGoçš„å‡ºç”Ÿæ—¶é—´2006å¹´1æœˆ2å·15ç‚¹04åˆ† Mon Jan // 24å°æ—¶åˆ¶ fmt.Println(now.Format(\"2006-01-02 15:04:05.000 Mon Jan\")) // 12å°æ—¶åˆ¶ fmt.Println(now.Format(\"2006-01-02 03:04:05.000 PM Mon Jan\")) fmt.Println(now.Format(\"2006/01/02 15:04\")) fmt.Println(now.Format(\"15:04 2006/01/02\")) fmt.Println(now.Format(\"2006/01/02\")) } /* 2022-12-01 08:30:47.872 Fri Dec 2022-12-01 08:30:47.872 AM Fri Dec 2022/12/01 08:30 08:30 2022/12/01 2022/12/01 */ è§£æå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´\npackage main import ( \"fmt\" \"time\" ) func main() { // åŠ è½½æ—¶åŒº loc, err := time.LoadLocation(\"Asia/Shanghai\") if err != nil { fmt.Println(err) return } // æŒ‰ç…§æŒ‡å®šæ—¶åŒºå’ŒæŒ‡å®šæ ¼å¼è§£æå­—ç¬¦ä¸²æ—¶é—´ timeObj, err := time.ParseInLocation(\"æ—¥æœŸï¼š2006/01/02 æ—¶é—´ï¼š 15:04:05\", \"æ—¥æœŸï¼š2019/08/04 æ—¶é—´ï¼š 14:15:20\", loc) if err != nil { fmt.Println(err) return } fmt.Println(timeObj) // 2019-08-04 14:15:20 +0800 CST } éå† map çš„æ—¶å€™å¯ä»¥åˆ é™¤å—ï¼Ÿ Goè¯­è¨€è§„èŒƒå…è®¸åœ¨éå†mapçš„è¿‡ç¨‹ä¸­åˆ é™¤å…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºmapåœ¨Goè¯­è¨€ä¸­æ˜¯æ— åºçš„ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ åä¸ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆã€‚\npackage main import \"fmt\" func main() { myMap := map[string]int{\"a\": 1, \"b\": 2, \"c\": 3} for key := range myMap { if key == \"a\" { delete(myMap, key) } } fmt.Println(myMap) } è¿™ä¸ªä»£ç ç‰‡æ®µå°†æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå¯¼è‡´panicã€‚åœ¨éå†è¿‡ç¨‹ä¸­åˆ é™¤å…ƒç´ åï¼Œmapçš„è¿­ä»£å™¨ä»ç„¶æœ‰æ•ˆï¼Œå› ä¸ºmapçš„éå†é¡ºåºæ˜¯æ— åºçš„ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ ä¸ä¼šå½±å“åç»­çš„è¿­ä»£ã€‚\nä½†æ˜¯ï¼Œå¦‚æœåœ¨å¤šåç¨‹ä¸‹ï¼Œç”±äº map å¹¶ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„ã€‚åŒæ—¶è¯»å†™ä¸€ä¸ª map æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºï¼Œå¦‚æœè¢«æ£€æµ‹åˆ°ï¼Œä¼šç›´æ¥ panicã€‚\nä¸Šé¢è¯´çš„æ˜¯å‘ç”Ÿåœ¨å¤šä¸ªåç¨‹åŒæ—¶è¯»å†™åŒä¸€ä¸ª map çš„æƒ…å†µä¸‹ã€‚ å¦‚æœåœ¨åŒä¸€ä¸ªåç¨‹å†…è¾¹éå†è¾¹åˆ é™¤ï¼Œå¹¶ä¸ä¼šæ£€æµ‹åˆ°åŒæ—¶è¯»å†™ï¼Œç†è®ºä¸Šæ˜¯å¯ä»¥è¿™æ ·åšçš„ã€‚ä½†æ˜¯ï¼Œéå†çš„ç»“æœå°±å¯èƒ½ä¸ä¼šæ˜¯ç›¸åŒçš„äº†ï¼Œæœ‰å¯èƒ½ç»“æœéå†ç»“æœé›†ä¸­åŒ…å«äº†åˆ é™¤çš„ keyï¼Œä¹Ÿæœ‰å¯èƒ½ä¸åŒ…å«ï¼Œè¿™å–å†³äºåˆ é™¤ key çš„æ—¶é—´ï¼šæ˜¯åœ¨éå†åˆ° key æ‰€åœ¨çš„ bucket æ—¶åˆ»å‰æˆ–è€…åã€‚\nä¸€èˆ¬è€Œè¨€ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š\nè¿™å¯ä»¥é€šè¿‡è¯»å†™é”æ¥è§£å†³ï¼šsync.RWMutexã€‚è¯»ä¹‹å‰è°ƒç”¨ RLock() å‡½æ•°ï¼Œè¯»å®Œä¹‹åè°ƒç”¨ RUnlock() å‡½æ•°è§£é”ï¼›å†™ä¹‹å‰è°ƒç”¨ Lock() å‡½æ•°ï¼Œå†™å®Œä¹‹åï¼Œè°ƒç”¨ Unlock() è§£é”ã€‚\nå¦å¤–ï¼Œsync.Map æ˜¯çº¿ç¨‹å®‰å…¨çš„ mapï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç¤ºä¾‹ï¼Œç„¶ååˆ†åˆ«ä½¿ç”¨ä¸¤ç§æ–¹å¼å»è§£å†³å®ƒ\npackage main import ( \"fmt\" \"strconv\" \"sync\" ) var m = make(map[string]int) func get(key string) int { return m[key] } func set(key string, value int) { m[key] = value } func main() { wg := sync.WaitGroup{} for i := 0; i \u003c 100; i++ { wg.Add(1) go func(n int) { key := strconv.Itoa(n) set(key, n) fmt.Printf(\"k=:%v, v:=%v\\n\", key, get(key)) wg.Done() }(i) } wg.Wait() } è¿è¡Œç»“æœï¼š\n...... k=:66,v:=66 k=:43,v:=43 k=:44,v:=44 ...... k=:49,v:=49 k=:50,v:=50 k=:51,v:=51 fatal error: concurrent map writes fatal error: concurrent map writes fatal error: concurrent map writes æˆ‘ä»¬ä¸èƒ½åœ¨å¤šä¸ª goroutine ä¸­å¹¶å‘å¯¹å†…ç½®çš„ map è¿›è¡Œè¯»å†™æ“ä½œï¼Œå¦åˆ™ä¼šå­˜åœ¨æ•°æ®ç«äº‰é—®é¢˜ã€‚\nåƒè¿™ç§åœºæ™¯ä¸‹å°±éœ€è¦ä¸º map åŠ é”æ¥ä¿è¯å¹¶å‘çš„å®‰å…¨æ€§äº†ï¼ŒGoè¯­è¨€çš„syncåŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å¹¶å‘å®‰å…¨ç‰ˆ mapâ€”â€”sync.Mapã€‚å¼€ç®±å³ç”¨è¡¨ç¤ºå…¶ä¸ç”¨åƒå†…ç½®çš„ map ä¸€æ ·ä½¿ç”¨ make å‡½æ•°åˆå§‹åŒ–å°±èƒ½ç›´æ¥ä½¿ç”¨ã€‚åŒæ—¶sync.Mapå†…ç½®äº†è¯¸å¦‚Storeã€Loadã€LoadOrStoreã€Deleteã€Rangeç­‰æ“ä½œæ–¹æ³•ã€‚\næ–¹æ³•å åŠŸèƒ½ func (m *Map) Store(key, value interface{}) å­˜å‚¨key-valueæ•°æ® func (m *Map) Load(key interface{}) (value interface{}, ok bool) æŸ¥è¯¢keyå¯¹åº”çš„value func (m *Map) LoadOrStore(key, value interface{}) (actual interface{}, loaded bool) æŸ¥è¯¢æˆ–å­˜å‚¨keyå¯¹åº”çš„value func (m *Map) LoadAndDelete(key interface{}) (value interface{}, loaded bool) æŸ¥è¯¢å¹¶åˆ é™¤key func (m *Map) Delete(key interface{}) åˆ é™¤key func (m *Map) Range(f func(key, value interface{}) bool) å¯¹mapä¸­çš„æ¯ä¸ªkey-valueä¾æ¬¡è°ƒç”¨f ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å¹¶å‘è¯»å†™sync.Mapã€‚\npackage main import ( \"fmt\" \"strconv\" \"sync\" ) // å¹¶å‘å®‰å…¨çš„map var m = sync.Map{} func main() { wg := sync.WaitGroup{} // å¯¹mæ‰§è¡Œ20ä¸ªå¹¶å‘çš„è¯»å†™æ“ä½œ for i := 0; i \u003c 20; i++ { wg.Add(1) go func(n int) { key := strconv.Itoa(n) m.Store(key, n) // å­˜å‚¨key-value value, _ := m.Load(key) // æ ¹æ®keyå–å€¼ fmt.Printf(\"k=:%v,v:=%v\\n\", key, value) wg.Done() }(i) } wg.Wait() } ä½¿ç”¨ é”\npackage main import ( \"fmt\" \"strconv\" \"sync\" ) var mu sync.RWMutex var m = make(map[string]int) func get(key string) int { return m[key] } func set(key string, value int) { m[key] = value } func main() { wg := sync.WaitGroup{} for i := 0; i \u003c 80; i++ { wg.Add(1) go func(n int) { key := strconv.Itoa(n) mu.Lock() set(key, n) mu.Unlock() mu.RLock() fmt.Printf(\"k=:%v, v:=%v\\n\", key, get(key)) mu.RUnlock() wg.Done() }(i) } wg.Wait() } map çš„æ‰©å®¹å’Œæ”¶ç¼©å®¹é‡ ",
  "wordCount" : "5842",
  "inLanguage": "zh",
  "datePublished": "2023-11-06T20:09:45+08:00",
  "dateModified": "2023-11-06T20:09:45+08:00",
  "author":[{
    "@type": "Person",
    "name": "Blaine"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://Bin-lin-rgb.github.io/posts/go/some_examples/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Blaine's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://Bin-lin-rgb.github.io/img/icon.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://Bin-lin-rgb.github.io/" accesskey="h" title="Blaine&#39;s Blog (Alt + H)">
            <img src="https://Bin-lin-rgb.github.io/img/icon.png" alt="logo" aria-label="logo"
                 height="35">Blaine&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://Bin-lin-rgb.github.io/" title="ğŸ  ä¸»é¡µ">
                <span>ğŸ  ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://Bin-lin-rgb.github.io/posts" title="ğŸ“š æ–‡ç« ">
                <span>ğŸ“š æ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="https://Bin-lin-rgb.github.io/search" title="ğŸ” æœç´¢ (Alt &#43; /)" accesskey=/>
                <span>ğŸ” æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://Bin-lin-rgb.github.io/tags" title="ğŸ§© æ ‡ç­¾">
                <span>ğŸ§© æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://Bin-lin-rgb.github.io/archives/" title="â±ï¸ æ—¶é—´è½´">
                <span>â±ï¸ æ—¶é—´è½´</span>
                </a>
            </li>
            <li>
                <a href="https://Bin-lin-rgb.github.io/about" title="ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº">
                <span>ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://Bin-lin-rgb.github.io/links" title="ğŸ¤ å‹é“¾">
                <span>ğŸ¤ å‹é“¾</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://Bin-lin-rgb.github.io/">ğŸ  ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://Bin-lin-rgb.github.io/posts/">ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href="https://Bin-lin-rgb.github.io/posts/go/">ğŸ¥‡ Golang</a></div>
            <h1 class="post-title">
                Some_examples
            </h1>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-11-06
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>5842å­—
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>12åˆ†é’Ÿ
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>Blaine
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
            </span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "https://Bin-lin-rgb.github.io/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId: "https://twikoo-api-nine-silk.vercel.app/", 
                                region: "ap-guangzhou", 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">ç›®å½•</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%8d%8f%e7%a8%8b%e4%ba%a4%e6%9b%bf%e6%89%93%e5%8d%b0-a1b2c3" aria-label="åç¨‹äº¤æ›¿æ‰“å° a1b2c3&amp;hellip;">åç¨‹äº¤æ›¿æ‰“å° a1b2c3&hellip;</a></li>
                <li>
                    <a href="#%e5%b9%b6%e5%8f%913%e4%b8%aa%e5%87%bd%e6%95%b0" aria-label="å¹¶å‘3ä¸ªå‡½æ•°">å¹¶å‘3ä¸ªå‡½æ•°</a></li>
                <li>
                    <a href="#%e5%88%a0%e9%99%a4%e5%88%87%e7%89%87%e4%b8%ad%e7%9a%84%e7%ac%ac-n-%e4%b8%aa%e5%85%83%e7%b4%a0" aria-label="åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ n ä¸ªå…ƒç´ ">åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ n ä¸ªå…ƒç´ </a></li>
                <li>
                    <a href="#map-%e4%ba%a4%e5%b9%b6%e9%9b%86" aria-label="map äº¤å¹¶é›†">map äº¤å¹¶é›†</a></li>
                <li>
                    <a href="#panic-%e5%92%8c-defer" aria-label="panic å’Œ defer">panic å’Œ defer</a></li>
                <li>
                    <a href="#select-%e5%92%8c-channel" aria-label="select å’Œ channel">select å’Œ channel</a></li>
                <li>
                    <a href="#slice-%e7%9a%84%e4%bc%a0%e9%80%92" aria-label="Slice çš„ä¼ é€’">Slice çš„ä¼ é€’</a></li>
                <li>
                    <a href="#strconv-%e8%bd%ac%e6%8d%a2" aria-label="strconv è½¬æ¢">strconv è½¬æ¢</a><ul>
                        
                <li>
                    <a href="#string%e4%b8%8eint%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2" aria-label="stringä¸intç±»å‹è½¬æ¢">stringä¸intç±»å‹è½¬æ¢</a></li>
                <li>
                    <a href="#parse%e7%b3%bb%e5%88%97%e5%87%bd%e6%95%b0" aria-label="Parseç³»åˆ—å‡½æ•°">Parseç³»åˆ—å‡½æ•°</a></li>
                <li>
                    <a href="#format%e7%b3%bb%e5%88%97%e5%87%bd%e6%95%b0" aria-label="Formatç³»åˆ—å‡½æ•°">Formatç³»åˆ—å‡½æ•°</a></li></ul>
                </li>
                <li>
                    <a href="#time-%e5%8c%85%e7%9a%84%e4%bd%bf%e7%94%a8" aria-label="time åŒ…çš„ä½¿ç”¨">time åŒ…çš„ä½¿ç”¨</a></li>
                <li>
                    <a href="#%e9%81%8d%e5%8e%86-map-%e7%9a%84%e6%97%b6%e5%80%99%e5%8f%af%e4%bb%a5%e5%88%a0%e9%99%a4%e5%90%97" aria-label="éå† map çš„æ—¶å€™å¯ä»¥åˆ é™¤å—ï¼Ÿ">éå† map çš„æ—¶å€™å¯ä»¥åˆ é™¤å—ï¼Ÿ</a></li>
                <li>
                    <a href="#map-%e7%9a%84%e6%89%a9%e5%ae%b9%e5%92%8c%e6%94%b6%e7%bc%a9%e5%ae%b9%e9%87%8f" aria-label="map çš„æ‰©å®¹å’Œæ”¶ç¼©å®¹é‡">map çš„æ‰©å®¹å’Œæ”¶ç¼©å®¹é‡</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h1 id="åç¨‹äº¤æ›¿æ‰“å°-a1b2c3">åç¨‹äº¤æ›¿æ‰“å° a1b2c3&hellip;<a hidden class="anchor" aria-hidden="true" href="#åç¨‹äº¤æ›¿æ‰“å°-a1b2c3">#</a></h1>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#ff5c57">var</span> wg sync.WaitGroup
</span></span><span style="display:flex;"><span>	wg.<span style="color:#57c7ff">Add</span>(<span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>	chNumber <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> <span style="color:#ff5c57">struct</span>{})
</span></span><span style="display:flex;"><span>	chLetter <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> <span style="color:#ff5c57">struct</span>{})
</span></span><span style="display:flex;"><span>	i <span style="color:#ff6ac1">:=</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>	index <span style="color:#ff6ac1">:=</span> <span style="color:#ff9f43">0</span>
</span></span><span style="display:flex;"><span>	a <span style="color:#ff6ac1">:=</span> <span style="color:#5af78e">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">for</span> c <span style="color:#ff6ac1">:=</span> <span style="color:#5af78e">&#39;a&#39;</span>; c <span style="color:#ff6ac1">&lt;=</span> <span style="color:#5af78e">&#39;z&#39;</span>; c<span style="color:#ff6ac1">++</span> {
</span></span><span style="display:flex;"><span>		a = a <span style="color:#ff6ac1">+</span> <span style="color:#ff5c57">string</span>(c)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">go</span> <span style="color:#ff5c57">func</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">for</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff6ac1">select</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff6ac1">case</span> <span style="color:#ff6ac1">&lt;-</span>chNumber:
</span></span><span style="display:flex;"><span>				fmt.<span style="color:#57c7ff">Print</span>(i)
</span></span><span style="display:flex;"><span>				i<span style="color:#ff6ac1">++</span>
</span></span><span style="display:flex;"><span>				chLetter <span style="color:#ff6ac1">&lt;-</span> <span style="color:#ff5c57">struct</span>{}{}
</span></span><span style="display:flex;"><span>				<span style="color:#ff6ac1">break</span>
</span></span><span style="display:flex;"><span>			<span style="color:#ff6ac1">default</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#ff6ac1">break</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">go</span> <span style="color:#ff5c57">func</span>(wg <span style="color:#ff6ac1">*</span>sync.WaitGroup) {
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">for</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff6ac1">select</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#ff6ac1">case</span> <span style="color:#ff6ac1">&lt;-</span>chLetter:
</span></span><span style="display:flex;"><span>				<span style="color:#ff6ac1">if</span> index &gt; <span style="color:#ff5c57">len</span>(a)<span style="color:#ff6ac1">-</span><span style="color:#ff9f43">1</span> {
</span></span><span style="display:flex;"><span>					wg.<span style="color:#57c7ff">Done</span>()
</span></span><span style="display:flex;"><span>					<span style="color:#ff6ac1">return</span>
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>				fmt.<span style="color:#57c7ff">Print</span>(<span style="color:#ff5c57">string</span>(a[index]))
</span></span><span style="display:flex;"><span>				index<span style="color:#ff6ac1">++</span>
</span></span><span style="display:flex;"><span>				chNumber <span style="color:#ff6ac1">&lt;-</span> <span style="color:#ff5c57">struct</span>{}{}
</span></span><span style="display:flex;"><span>				<span style="color:#ff6ac1">break</span>
</span></span><span style="display:flex;"><span>			<span style="color:#ff6ac1">default</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#ff6ac1">break</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}(<span style="color:#ff6ac1">&amp;</span>wg)
</span></span><span style="display:flex;"><span>	chLetter <span style="color:#ff6ac1">&lt;-</span> <span style="color:#ff5c57">struct</span>{}{}
</span></span><span style="display:flex;"><span>	wg.<span style="color:#57c7ff">Wait</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="å¹¶å‘3ä¸ªå‡½æ•°">å¹¶å‘3ä¸ªå‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#å¹¶å‘3ä¸ªå‡½æ•°">#</a></h1>
<p>f1()(int[],error),f2()(int[],error),f3()(int[],error)å…±ä¸‰ä¸ªå‡½æ•°ï¼Œè¯·ä½¿ç”¨ go channel å¹¶å‘è¿™ä¸‰ä¸ªå‡½æ•°å¹¶ä¸”å°†ç»“æœæ”¶é›†èµ·æ¥å»é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">f1</span>() ([]<span style="color:#9aedfe">int</span>, <span style="color:#9aedfe">error</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">return</span> []<span style="color:#9aedfe">int</span>{<span style="color:#ff9f43">1</span>, <span style="color:#ff9f43">2</span>, <span style="color:#ff9f43">3</span>}, <span style="color:#ff6ac1">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">f2</span>() ([]<span style="color:#9aedfe">int</span>, <span style="color:#9aedfe">error</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">return</span> []<span style="color:#9aedfe">int</span>{<span style="color:#ff9f43">3</span>, <span style="color:#ff9f43">4</span>, <span style="color:#ff9f43">5</span>}, <span style="color:#ff6ac1">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">f3</span>() ([]<span style="color:#9aedfe">int</span>, <span style="color:#9aedfe">error</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">return</span> []<span style="color:#9aedfe">int</span>{<span style="color:#ff9f43">5</span>, <span style="color:#ff9f43">6</span>, <span style="color:#ff9f43">7</span>}, <span style="color:#ff6ac1">nil</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#ff5c57">var</span> wg sync.WaitGroup
</span></span><span style="display:flex;"><span>  resultCh <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> []<span style="color:#9aedfe">int</span>)
</span></span><span style="display:flex;"><span>  seen <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">int</span>]<span style="color:#9aedfe">bool</span>)
</span></span><span style="display:flex;"><span>  mu <span style="color:#ff6ac1">:=</span> sync.Mutex{}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  call <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">func</span>(f <span style="color:#ff5c57">func</span>() ([]<span style="color:#9aedfe">int</span>, <span style="color:#9aedfe">error</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">defer</span> wg.<span style="color:#57c7ff">Done</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    data, err <span style="color:#ff6ac1">:=</span> <span style="color:#57c7ff">f</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">if</span> err <span style="color:#ff6ac1">!=</span> <span style="color:#ff6ac1">nil</span> {
</span></span><span style="display:flex;"><span>      fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Error:&#34;</span>, err)
</span></span><span style="display:flex;"><span>      <span style="color:#ff6ac1">return</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#78787e">// å»é‡
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    mu.<span style="color:#57c7ff">Lock</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">defer</span> mu.<span style="color:#57c7ff">Unlock</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">for</span> _, v <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> data {
</span></span><span style="display:flex;"><span>      <span style="color:#ff6ac1">if</span> !seen[v] {
</span></span><span style="display:flex;"><span>        seen[v] = <span style="color:#ff6ac1">true</span>
</span></span><span style="display:flex;"><span>        resultCh <span style="color:#ff6ac1">&lt;-</span> []<span style="color:#9aedfe">int</span>{v}
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  wg.<span style="color:#57c7ff">Add</span>(<span style="color:#ff9f43">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">go</span> <span style="color:#57c7ff">call</span>(f1)
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">go</span> <span style="color:#57c7ff">call</span>(f2)
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">go</span> <span style="color:#57c7ff">call</span>(f3)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">go</span> <span style="color:#ff5c57">func</span>() {
</span></span><span style="display:flex;"><span>    wg.<span style="color:#57c7ff">Wait</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#ff5c57">close</span>(resultCh)
</span></span><span style="display:flex;"><span>  }()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// ä» channel ä¸­è¯»å–ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">for</span> result <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> resultCh {
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Result:&#34;</span>, result)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬-n-ä¸ªå…ƒç´ ">åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ n ä¸ªå…ƒç´ <a hidden class="anchor" aria-hidden="true" href="#åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬-n-ä¸ªå…ƒç´ ">#</a></h1>
<p>è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ‡ç‰‡å’Œä¸€ä¸ªç´¢å¼• nï¼Œç„¶ååˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ n ä¸ªå…ƒç´ ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> <span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">removeElement</span>(slice []<span style="color:#9aedfe">int</span>, n <span style="color:#9aedfe">int</span>) []<span style="color:#9aedfe">int</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// æ£€æŸ¥ç´¢å¼•æ˜¯å¦åœ¨åˆ‡ç‰‡èŒƒå›´å†…
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">if</span> n &lt; <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">||</span> n <span style="color:#ff6ac1">&gt;=</span> <span style="color:#ff5c57">len</span>(slice) {
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Index out of range.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">return</span> slice
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// å°†ç´¢å¼• n ä¹‹åçš„å…ƒç´ å¤åˆ¶åˆ°äº†ç´¢å¼• n çš„ä½ç½®ï¼Œç›¸å½“äºæŠŠ n+1ã€n+2ã€... ç­‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œè¦†ç›–äº†ç´¢å¼• n çš„å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff5c57">copy</span>(slice[n:], slice[n<span style="color:#ff6ac1">+</span><span style="color:#ff9f43">1</span>:])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// ç¼©çŸ­åˆ‡ç‰‡ï¼Œåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">return</span> slice[:<span style="color:#ff5c57">len</span>(slice)<span style="color:#ff6ac1">-</span><span style="color:#ff9f43">1</span>]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// ç¤ºä¾‹åˆ‡ç‰‡
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  mySlice <span style="color:#ff6ac1">:=</span> []<span style="color:#9aedfe">int</span>{<span style="color:#ff9f43">1</span>, <span style="color:#ff9f43">2</span>, <span style="color:#ff9f43">3</span>, <span style="color:#ff9f43">4</span>, <span style="color:#ff9f43">5</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// åˆ é™¤åˆ‡ç‰‡ä¸­çš„ç¬¬ 2 ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  result <span style="color:#ff6ac1">:=</span> <span style="color:#57c7ff">removeElement</span>(mySlice, <span style="color:#ff9f43">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// æ‰“å°ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  fmt.<span style="color:#57c7ff">Println</span>(result)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æˆ–è€…ä½¿ç”¨ append()</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">removeElement</span>(slice []<span style="color:#9aedfe">int</span>, n <span style="color:#9aedfe">int</span>) []<span style="color:#9aedfe">int</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// æ£€æŸ¥ç´¢å¼•æ˜¯å¦åœ¨åˆ‡ç‰‡èŒƒå›´å†…
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">if</span> n &lt; <span style="color:#ff9f43">0</span> <span style="color:#ff6ac1">||</span> n <span style="color:#ff6ac1">&gt;=</span> <span style="color:#ff5c57">len</span>(slice) {
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Index out of range.&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">return</span> slice
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// å¤åˆ¶ç´¢å¼• n ä¹‹å‰çš„å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  result <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">append</span>([]<span style="color:#9aedfe">int</span>{}, slice[:n]<span style="color:#ff6ac1">...</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// å¤åˆ¶ç´¢å¼• n+1 ä¹‹åçš„å…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  result = <span style="color:#ff5c57">append</span>(result, slice[n<span style="color:#ff6ac1">+</span><span style="color:#ff9f43">1</span>:]<span style="color:#ff6ac1">...</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// ç¼©çŸ­åˆ‡ç‰‡ï¼Œåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ 
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">return</span> result
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="map-äº¤å¹¶é›†">map äº¤å¹¶é›†<a hidden class="anchor" aria-hidden="true" href="#map-äº¤å¹¶é›†">#</a></h1>
<p>è®¾è®¡2ä¸ªgoå‡½æ•°ï¼Œå®ç°è¾“å…¥aã€bä¸¤ä¸ªmapï¼Œè¾“å‡ºä¸€ä¸ªcçš„mapï¼Œåˆ†åˆ«å®ç°äº¤é›†å’Œå¹¶é›†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">// Intersection è®¡ç®—ä¸¤ä¸ª map çš„äº¤é›†
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">Intersection</span>(a, b <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>) <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span> {
</span></span><span style="display:flex;"><span>  result <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">for</span> key, valueA <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> a {
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">if</span> valueB, ok <span style="color:#ff6ac1">:=</span> b[key]; ok {
</span></span><span style="display:flex;"><span>      result[key] = valueA <span style="color:#ff6ac1">+</span> valueB
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">return</span> result
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">// Union è®¡ç®—ä¸¤ä¸ª map çš„å¹¶é›†
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">Union</span>(a, b <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>) <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span> {
</span></span><span style="display:flex;"><span>  result <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// å°† map a å¤åˆ¶åˆ°ç»“æœä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">for</span> key, value <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> a {
</span></span><span style="display:flex;"><span>    result[key] = value
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// å°† map b å¤åˆ¶åˆ°ç»“æœä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒçš„é”®ï¼Œåˆ™ç´¯åŠ å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  <span style="color:#ff6ac1">for</span> key, value <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> b {
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">if</span> existingValue, ok <span style="color:#ff6ac1">:=</span> result[key]; ok {
</span></span><span style="display:flex;"><span>      result[key] = existingValue <span style="color:#ff6ac1">+</span> value
</span></span><span style="display:flex;"><span>    } <span style="color:#ff6ac1">else</span> {
</span></span><span style="display:flex;"><span>      result[key] = value
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">return</span> result
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// ç¤ºä¾‹ map
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  mapA <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>{<span style="color:#5af78e">&#34;apple&#34;</span>: <span style="color:#ff9f43">3</span>, <span style="color:#5af78e">&#34;banana&#34;</span>: <span style="color:#ff9f43">2</span>, <span style="color:#5af78e">&#34;orange&#34;</span>: <span style="color:#ff9f43">1</span>}
</span></span><span style="display:flex;"><span>  mapB <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>{<span style="color:#5af78e">&#34;banana&#34;</span>: <span style="color:#ff9f43">1</span>, <span style="color:#5af78e">&#34;orange&#34;</span>: <span style="color:#ff9f43">2</span>, <span style="color:#5af78e">&#34;grape&#34;</span>: <span style="color:#ff9f43">4</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// è®¡ç®—å¹¶è¾“å‡ºäº¤é›†
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  intersection <span style="color:#ff6ac1">:=</span> <span style="color:#57c7ff">Intersection</span>(mapA, mapB)
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Intersection:&#34;</span>, intersection)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// è®¡ç®—å¹¶è¾“å‡ºå¹¶é›†
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>  union <span style="color:#ff6ac1">:=</span> <span style="color:#57c7ff">Union</span>(mapA, mapB)
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Union:&#34;</span>, union)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="panic-å’Œ-defer">panic å’Œ defer<a hidden class="anchor" aria-hidden="true" href="#panic-å’Œ-defer">#</a></h1>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">defer</span> <span style="color:#ff5c57">func</span>() { fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;æ‰“å° 1&#34;</span>) }()
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">defer</span> <span style="color:#ff5c57">func</span>() { fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;æ‰“å° 2&#34;</span>) }()
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">defer</span> <span style="color:#ff5c57">func</span>() { fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;æ‰“å° 3&#34;</span>) }()
</span></span><span style="display:flex;"><span>	<span style="color:#ff5c57">panic</span>(<span style="color:#5af78e">&#34;æ‰“å° 4&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>panic(&ldquo;æ‰“å° 4&rdquo;) ä¼šå¯¼è‡´ç¨‹åºå‘ç”Ÿ panicã€‚å½“ panic å‘ç”Ÿæ—¶ï¼ŒGo è¯­è¨€ä¼šç«‹å³åœæ­¢å½“å‰å‡½æ•°çš„æ‰§è¡Œï¼Œä½†ä¼šæ‰§è¡Œè¯¥å‡½æ•°ä¸­çš„æ‰€æœ‰ defer è¯­å¥ï¼Œç„¶åå°†æ§åˆ¶æƒä¼ é€’ç»™è°ƒç”¨è¯¥å‡½æ•°çš„å‡½æ•°ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°è¾¾åˆ°äº†ç¨‹åºçš„æœ€é¡¶å±‚ï¼Œæ­¤æ—¶ç¨‹åºä¼šç»ˆæ­¢å¹¶è¾“å‡º panic çš„ä¿¡æ¯ã€‚</p>
<p>åœ¨ä½ çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶å‘ç”Ÿäº† panicï¼Œä½†æ˜¯ç”±äºåœ¨æ¯ä¸ª defer è¯­å¥ä¸­éƒ½æœ‰è¾“å‡ºï¼Œæ‰€ä»¥æ¯ä¸ª defer è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚ç”±äº defer æ˜¯åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„é¡ºåº
å› æ­¤ï¼Œç¨‹åºçš„è¾“å‡ºç»“æœå°†æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>æ‰“å° 3
</span></span><span style="display:flex;"><span>æ‰“å° 2
</span></span><span style="display:flex;"><span>æ‰“å° 1
</span></span><span style="display:flex;"><span>panic: æ‰“å° 4
</span></span></code></pre></div><h1 id="select-å’Œ-channel">select å’Œ channel<a hidden class="anchor" aria-hidden="true" href="#select-å’Œ-channel">#</a></h1>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	ch1 <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> <span style="color:#9aedfe">int</span>, <span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>	ch2 <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> <span style="color:#9aedfe">string</span>, <span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>	ch1 <span style="color:#ff6ac1">&lt;-</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>	ch2 <span style="color:#ff6ac1">&lt;-</span> <span style="color:#5af78e">&#34;Hello&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">select</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">case</span> x <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">&lt;-</span>ch1:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#57c7ff">Println</span>(x)
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">case</span> y <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">&lt;-</span>ch2:
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#57c7ff">Println</span>(y)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿™åªä¼šé€‰æ‹©ä¸€ä¸ª case éšæœºæ‰“å°ï¼Œè‹¥æœæƒ³æ‰§è¡Œå¤šä¸ª case ï¼Œå¯ä»¥ä½¿ç”¨ for</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>  ch1 <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> <span style="color:#9aedfe">int</span>, <span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>  ch2 <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">chan</span> <span style="color:#9aedfe">string</span>, <span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>  ch1 <span style="color:#ff6ac1">&lt;-</span> <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>  ch2 <span style="color:#ff6ac1">&lt;-</span> <span style="color:#5af78e">&#34;Hello&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff6ac1">for</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">select</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">case</span> x <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">&lt;-</span>ch1:
</span></span><span style="display:flex;"><span>      fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Received from ch1:&#34;</span>, x)
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">case</span> y <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">&lt;-</span>ch2:
</span></span><span style="display:flex;"><span>      fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;Received from ch2:&#34;</span>, y)
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">default</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#78787e">// å¦‚æœæ²¡æœ‰é€šé“å°±ç»ªï¼Œé€€å‡ºå¾ªç¯
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>      <span style="color:#ff6ac1">return</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="slice-çš„ä¼ é€’">Slice çš„ä¼ é€’<a hidden class="anchor" aria-hidden="true" href="#slice-çš„ä¼ é€’">#</a></h1>
<p>å…ˆæ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç è¾“å‡ºä»€ä¹ˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">add</span>(arr []<span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>  arr = <span style="color:#ff5c57">append</span>(arr, <span style="color:#ff9f43">10</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">modify</span>(arr []<span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>  arr[<span style="color:#ff9f43">0</span>] = <span style="color:#ff9f43">10</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	array <span style="color:#ff6ac1">:=</span> []<span style="color:#9aedfe">int</span>{<span style="color:#ff9f43">1</span>, <span style="color:#ff9f43">2</span>, <span style="color:#ff9f43">3</span>}
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(array)
</span></span><span style="display:flex;"><span>  <span style="color:#57c7ff">add</span>(array)
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(array)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;--------------------&#34;</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(array)
</span></span><span style="display:flex;"><span>  <span style="color:#57c7ff">modify</span>(array)
</span></span><span style="display:flex;"><span>  fmt.<span style="color:#57c7ff">Println</span>(array)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åœ¨è¿™é‡Œï¼Œä½ æœ‰ä¸¤ä¸ªå‡½æ•°addå’Œmodifyï¼Œå®ƒä»¬éƒ½æ¥æ”¶ä¸€ä¸ªåˆ‡ç‰‡ä½œä¸ºå‚æ•°ã€‚æˆ‘å°†åˆ†åˆ«è§£é‡Šå®ƒä»¬çš„è¡Œä¸ºã€‚</p>
<p>add å‡½æ•°: è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯å°†ä¸€ä¸ªæ•´æ•°10è¿½åŠ åˆ°ä¼ å…¥çš„åˆ‡ç‰‡arrçš„æœ«å°¾ã€‚ç„¶è€Œï¼Œè¿™é‡Œçš„arræ˜¯ä¼ é€’è¿›æ¥çš„åˆ‡ç‰‡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œappendæ“ä½œå¯¹å‰¯æœ¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†è¿™å¯¹åŸå§‹åˆ‡ç‰‡æ²¡æœ‰å½±å“ï¼Œå› ä¸ºarråªæ˜¯ä¼ é€’è¿›æ¥çš„å‰¯æœ¬ã€‚å½“å‡½æ•°è¿”å›æ—¶ï¼Œå¯¹åŸå§‹åˆ‡ç‰‡æ²¡æœ‰åšä»»ä½•æ›´æ”¹ã€‚</p>
<p>modify å‡½æ•°:è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯å°†ä¼ å…¥åˆ‡ç‰‡arrçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¿®æ”¹ä¸º10ã€‚ä¸addä¸åŒï¼Œè¿™é‡Œä¿®æ”¹çš„æ˜¯åˆ‡ç‰‡ä¸­çš„åŸå§‹æ•°æ®ï¼Œå› ä¸ºåˆ‡ç‰‡æ˜¯å¼•ç”¨ä¼ é€’ã€‚å³ä½¿æˆ‘ä»¬ä¼ é€’çš„æ˜¯åˆ‡ç‰‡çš„å‰¯æœ¬ï¼Œç”±äºåº•å±‚æ•°æ®æ˜¯å…±äº«çš„ï¼Œå¯¹å‰¯æœ¬çš„ä¿®æ”¹ä¼šå½±å“åŸå§‹åˆ‡ç‰‡ã€‚æ‰€ä»¥ï¼Œå½“modifyå‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼ŒåŸå§‹åˆ‡ç‰‡ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º10ã€‚</p>
<p>åœ¨mainå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥æµ‹è¯•è¿™ä¸¤ä¸ªå‡½æ•°çš„æ•ˆæœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[1 2 3]
</span></span><span style="display:flex;"><span>[1 2 3]
</span></span><span style="display:flex;"><span>--------------------
</span></span><span style="display:flex;"><span>[1 2 3]
</span></span><span style="display:flex;"><span>[10 2 3]
</span></span></code></pre></div><p>æ€»ç»“ï¼šaddå‡½æ•°å¯¹ä¼ å…¥çš„åˆ‡ç‰‡å‰¯æœ¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†æ²¡æœ‰å½±å“åŸå§‹åˆ‡ç‰‡ï¼›è€Œmodifyå‡½æ•°é€šè¿‡å¼•ç”¨ä¿®æ”¹äº†åŸå§‹åˆ‡ç‰‡çš„æ•°æ®ã€‚</p>
<h1 id="strconv-è½¬æ¢">strconv è½¬æ¢<a hidden class="anchor" aria-hidden="true" href="#strconv-è½¬æ¢">#</a></h1>
<p>strconvåŒ…å®ç°äº†åŸºæœ¬æ•°æ®ç±»å‹ä¸å…¶å­—ç¬¦ä¸²è¡¨ç¤ºçš„è½¬æ¢ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å¸¸ç”¨å‡½æ•°ï¼š Atoi()ã€Itoa()ã€parseç³»åˆ—ã€formatç³»åˆ—ã€appendç³»åˆ—ã€‚</p>
<p>æ›´å¤šå‡½æ•°è¯·æŸ¥çœ‹<a href="https://golang.org/pkg/strconv/">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h2 id="stringä¸intç±»å‹è½¬æ¢">stringä¸intç±»å‹è½¬æ¢<a hidden class="anchor" aria-hidden="true" href="#stringä¸intç±»å‹è½¬æ¢">#</a></h2>
<p>è¿™ä¸€ç»„å‡½æ•°æ˜¯æˆ‘ä»¬å¹³æ—¶ç¼–ç¨‹ä¸­ç”¨çš„æœ€å¤šçš„ã€‚</p>
<blockquote>
<p>1.1.2. Atoi()</p>
</blockquote>
<p>Atoi()å‡½æ•°ç”¨äºå°†å­—ç¬¦ä¸²ç±»å‹çš„æ•´æ•°è½¬æ¢ä¸ºintç±»å‹ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">Atoi</span>(s <span style="color:#9aedfe">string</span>) (i <span style="color:#9aedfe">int</span>, err <span style="color:#9aedfe">error</span>)
</span></span></code></pre></div><p>å¦‚æœä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°æ— æ³•è½¬æ¢ä¸ºintç±»å‹ï¼Œå°±ä¼šè¿”å›é”™è¯¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>s1 <span style="color:#ff6ac1">:=</span> <span style="color:#5af78e">&#34;100&#34;</span>
</span></span><span style="display:flex;"><span>i1, err <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">Atoi</span>(s1)
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">if</span> err <span style="color:#ff6ac1">!=</span> <span style="color:#ff6ac1">nil</span> {
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(<span style="color:#5af78e">&#34;can&#39;t convert to int&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#ff6ac1">else</span> {
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;type:%T value:%#v\n&#34;</span>, i1, i1) <span style="color:#78787e">//type:int value:100
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>}
</span></span></code></pre></div><blockquote>
<p>1.1.3. Itoa()</p>
</blockquote>
<p>Itoa()å‡½æ•°ç”¨äºå°†intç±»å‹æ•°æ®è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå…·ä½“çš„å‡½æ•°ç­¾åå¦‚ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">Itoa</span>(i <span style="color:#9aedfe">int</span>) <span style="color:#9aedfe">string</span>
</span></span></code></pre></div><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>i2 <span style="color:#ff6ac1">:=</span> <span style="color:#ff9f43">200</span>
</span></span><span style="display:flex;"><span>s2 <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">Itoa</span>(i2)
</span></span><span style="display:flex;"><span>fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;type:%T value:%#v\n&#34;</span>, s2, s2) <span style="color:#78787e">//type:string value:&#34;200&#34;
</span></span></span></code></pre></div><h2 id="parseç³»åˆ—å‡½æ•°">Parseç³»åˆ—å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#parseç³»åˆ—å‡½æ•°">#</a></h2>
<p>Parseç±»å‡½æ•°ç”¨äºè½¬æ¢å­—ç¬¦ä¸²ä¸ºç»™å®šç±»å‹çš„å€¼ï¼šParseBool()ã€ParseFloat()ã€ParseInt()ã€ParseUint()ã€‚</p>
<blockquote>
<p>1.1.6. ParseBool()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">ParseBool</span>(str <span style="color:#9aedfe">string</span>) (value <span style="color:#9aedfe">bool</span>, err <span style="color:#9aedfe">error</span>)
</span></span></code></pre></div><p>è¿”å›å­—ç¬¦ä¸²è¡¨ç¤ºçš„boolå€¼ã€‚å®ƒæ¥å—1ã€0ã€tã€fã€Tã€Fã€trueã€falseã€Trueã€Falseã€TRUEã€FALSEï¼›å¦åˆ™è¿”å›é”™è¯¯ã€‚</p>
<blockquote>
<p>1.1.7. ParseInt()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">ParseInt</span>(s <span style="color:#9aedfe">string</span>, base <span style="color:#9aedfe">int</span>, bitSize <span style="color:#9aedfe">int</span>) (i <span style="color:#9aedfe">int64</span>, err <span style="color:#9aedfe">error</span>)
</span></span></code></pre></div><p>è¿”å›å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•´æ•°å€¼ï¼Œæ¥å—æ­£è´Ÿå·ã€‚</p>
<p>baseæŒ‡å®šè¿›åˆ¶ï¼ˆ2åˆ°36ï¼‰ï¼Œå¦‚æœbaseä¸º0ï¼Œåˆ™ä¼šä»å­—ç¬¦ä¸²å‰ç½®åˆ¤æ–­ï¼Œâ€0xâ€æ˜¯16è¿›åˆ¶ï¼Œâ€0â€æ˜¯8è¿›åˆ¶ï¼Œå¦åˆ™æ˜¯10è¿›åˆ¶ï¼›</p>
<p>bitSizeæŒ‡å®šç»“æœå¿…é¡»èƒ½æ— æº¢å‡ºèµ‹å€¼çš„æ•´æ•°ç±»å‹ï¼Œ0ã€8ã€16ã€32ã€64 åˆ†åˆ«ä»£è¡¨ intã€int8ã€int16ã€int32ã€int64ï¼›</p>
<p>è¿”å›çš„erræ˜¯<code>*NumErr</code>ç±»å‹çš„ï¼Œå¦‚æœè¯­æ³•æœ‰è¯¯ï¼Œerr.Error = ErrSyntaxï¼›å¦‚æœç»“æœè¶…å‡ºç±»å‹èŒƒå›´err.Error = ErrRangeã€‚</p>
<blockquote>
<p>1.1.8. ParseUnit()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">ParseUint</span>(s <span style="color:#9aedfe">string</span>, base <span style="color:#9aedfe">int</span>, bitSize <span style="color:#9aedfe">int</span>) (n <span style="color:#9aedfe">uint64</span>, err <span style="color:#9aedfe">error</span>)
</span></span></code></pre></div><p>ParseUintç±»ä¼¼ParseIntä½†ä¸æ¥å—æ­£è´Ÿå·ï¼Œç”¨äºæ— ç¬¦å·æ•´å‹ã€‚</p>
<blockquote>
<p>1.1.9. ParseFloat()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">ParseFloat</span>(s <span style="color:#9aedfe">string</span>, bitSize <span style="color:#9aedfe">int</span>) (f <span style="color:#9aedfe">float64</span>, err <span style="color:#9aedfe">error</span>)
</span></span></code></pre></div><p>è§£æä¸€ä¸ªè¡¨ç¤ºæµ®ç‚¹æ•°çš„å­—ç¬¦ä¸²å¹¶è¿”å›å…¶å€¼ã€‚</p>
<p>å¦‚æœsåˆä¹è¯­æ³•è§„åˆ™ï¼Œå‡½æ•°ä¼šè¿”å›æœ€ä¸ºæ¥è¿‘sè¡¨ç¤ºå€¼çš„ä¸€ä¸ªæµ®ç‚¹æ•°ï¼ˆä½¿ç”¨IEEE754è§„èŒƒèˆå…¥ï¼‰ã€‚</p>
<p>bitSizeæŒ‡å®šäº†æœŸæœ›çš„æ¥æ”¶ç±»å‹ï¼Œ32æ˜¯float32ï¼ˆè¿”å›å€¼å¯ä»¥ä¸æ”¹å˜ç²¾ç¡®å€¼çš„èµ‹å€¼ç»™float32ï¼‰ï¼Œ64æ˜¯float64ï¼›</p>
<p>è¿”å›å€¼erræ˜¯<code>*NumErr</code>ç±»å‹çš„ï¼Œè¯­æ³•æœ‰è¯¯çš„ï¼Œerr.Error=ErrSyntaxï¼›ç»“æœè¶…å‡ºè¡¨ç¤ºèŒƒå›´çš„ï¼Œè¿”å›å€¼fä¸ºÂ±Infï¼Œerr.Error= ErrRangeã€‚</p>
<blockquote>
<p>1.1.10. ä»£ç ç¤ºä¾‹</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>b, err <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">ParseBool</span>(<span style="color:#5af78e">&#34;true&#34;</span>)
</span></span><span style="display:flex;"><span>f, err <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">ParseFloat</span>(<span style="color:#5af78e">&#34;3.1415&#34;</span>, <span style="color:#ff9f43">64</span>)
</span></span><span style="display:flex;"><span>i, err <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">ParseInt</span>(<span style="color:#5af78e">&#34;-2&#34;</span>, <span style="color:#ff9f43">10</span>, <span style="color:#ff9f43">64</span>)
</span></span><span style="display:flex;"><span>u, err <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">ParseUint</span>(<span style="color:#5af78e">&#34;2&#34;</span>, <span style="color:#ff9f43">10</span>, <span style="color:#ff9f43">64</span>)
</span></span></code></pre></div><p>è¿™äº›å‡½æ•°éƒ½æœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œç¬¬ä¸€ä¸ªè¿”å›å€¼æ˜¯è½¬æ¢åçš„å€¼ï¼Œç¬¬äºŒä¸ªè¿”å›å€¼ä¸ºè½¬åŒ–å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<h2 id="formatç³»åˆ—å‡½æ•°">Formatç³»åˆ—å‡½æ•°<a hidden class="anchor" aria-hidden="true" href="#formatç³»åˆ—å‡½æ•°">#</a></h2>
<p>Formatç³»åˆ—å‡½æ•°å®ç°äº†å°†ç»™å®šç±»å‹æ•°æ®æ ¼å¼åŒ–ä¸ºstringç±»å‹æ•°æ®çš„åŠŸèƒ½ã€‚</p>
<blockquote>
<p>1.1.12. FormatBool()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">FormatBool</span>(b <span style="color:#9aedfe">bool</span>) <span style="color:#9aedfe">string</span>
</span></span></code></pre></div><p>æ ¹æ®bçš„å€¼è¿”å›â€trueâ€æˆ–â€falseâ€ã€‚</p>
<blockquote>
<p>1.1.13. FormatInt()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">FormatInt</span>(i <span style="color:#9aedfe">int64</span>, base <span style="color:#9aedfe">int</span>) <span style="color:#9aedfe">string</span>
</span></span></code></pre></div><p>è¿”å›içš„baseè¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚base å¿…é¡»åœ¨2åˆ°36ä¹‹é—´ï¼Œç»“æœä¸­ä¼šä½¿ç”¨å°å†™å­—æ¯â€™aâ€™åˆ°â€™zâ€™è¡¨ç¤ºå¤§äº10çš„æ•°å­—ã€‚</p>
<blockquote>
<p>1.1.14. FormatUint()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">FormatUint</span>(i <span style="color:#9aedfe">uint64</span>, base <span style="color:#9aedfe">int</span>) <span style="color:#9aedfe">string</span>
</span></span></code></pre></div><p>æ˜¯FormatIntçš„æ— ç¬¦å·æ•´æ•°ç‰ˆæœ¬ã€‚</p>
<blockquote>
<p>1.1.15. FormatFloat()</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">FormatFloat</span>(f <span style="color:#9aedfe">float64</span>, fmt <span style="color:#9aedfe">byte</span>, prec, bitSize <span style="color:#9aedfe">int</span>) <span style="color:#9aedfe">string</span>
</span></span></code></pre></div><p>å‡½æ•°å°†æµ®ç‚¹æ•°è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›ã€‚</p>
<p>bitSizeè¡¨ç¤ºfçš„æ¥æºç±»å‹ï¼ˆ32ï¼šfloat32ã€64ï¼šfloat64ï¼‰ï¼Œä¼šæ®æ­¤è¿›è¡Œèˆå…¥ã€‚</p>
<p>fmtè¡¨ç¤ºæ ¼å¼ï¼šâ€™fâ€™ï¼ˆ-ddd.ddddï¼‰ã€â€™bâ€™ï¼ˆ-ddddpÂ±dddï¼ŒæŒ‡æ•°ä¸ºäºŒè¿›åˆ¶ï¼‰ã€â€™eâ€™ï¼ˆ-d.ddddeÂ±ddï¼Œåè¿›åˆ¶æŒ‡æ•°ï¼‰ã€â€™Eâ€™ï¼ˆ-d.ddddEÂ±ddï¼Œåè¿›åˆ¶æŒ‡æ•°ï¼‰ã€â€™gâ€™ï¼ˆæŒ‡æ•°å¾ˆå¤§æ—¶ç”¨â€™eâ€™æ ¼å¼ï¼Œå¦åˆ™â€™fâ€™æ ¼å¼ï¼‰ã€â€™Gâ€™ï¼ˆæŒ‡æ•°å¾ˆå¤§æ—¶ç”¨â€™Eâ€™æ ¼å¼ï¼Œå¦åˆ™â€™fâ€™æ ¼å¼ï¼‰ã€‚</p>
<p>precæ§åˆ¶ç²¾åº¦ï¼ˆæ’é™¤æŒ‡æ•°éƒ¨åˆ†ï¼‰ï¼šå¯¹â€™fâ€™ã€â€™eâ€™ã€â€™Eâ€™ï¼Œå®ƒè¡¨ç¤ºå°æ•°ç‚¹åçš„æ•°å­—ä¸ªæ•°ï¼›å¯¹â€™gâ€™ã€â€™Gâ€™ï¼Œå®ƒæ§åˆ¶æ€»çš„æ•°å­—ä¸ªæ•°ã€‚å¦‚æœprec ä¸º-1ï¼Œåˆ™ä»£è¡¨ä½¿ç”¨æœ€å°‘æ•°é‡çš„ã€ä½†åˆå¿…éœ€çš„æ•°å­—æ¥è¡¨ç¤ºfã€‚</p>
<blockquote>
<p>1.1.16. ä»£ç ç¤ºä¾‹</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>s1 <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">FormatBool</span>(<span style="color:#ff6ac1">true</span>)
</span></span><span style="display:flex;"><span>s2 <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">FormatFloat</span>(<span style="color:#ff9f43">3.1415</span>, <span style="color:#5af78e">&#39;E&#39;</span>, <span style="color:#ff6ac1">-</span><span style="color:#ff9f43">1</span>, <span style="color:#ff9f43">64</span>)
</span></span><span style="display:flex;"><span>s3 <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">FormatInt</span>(<span style="color:#ff6ac1">-</span><span style="color:#ff9f43">2</span>, <span style="color:#ff9f43">16</span>)
</span></span><span style="display:flex;"><span>s4 <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">FormatUint</span>(<span style="color:#ff9f43">2</span>, <span style="color:#ff9f43">16</span>)
</span></span></code></pre></div><h1 id="time-åŒ…çš„ä½¿ç”¨">time åŒ…çš„ä½¿ç”¨<a hidden class="anchor" aria-hidden="true" href="#time-åŒ…çš„ä½¿ç”¨">#</a></h1>
<p>æ—¶é—´å’Œæ—¥æœŸæ˜¯æˆ‘ä»¬ç¼–ç¨‹ä¸­ç»å¸¸ä¼šç”¨åˆ°çš„ï¼Œä»¥ä¸‹ä»‹ç»äº†Goè¯­è¨€å†…ç½®çš„timeåŒ…çš„åŸºæœ¬ç”¨æ³•ã€‚</p>
<p>timeåŒ…æä¾›äº†æ—¶é—´çš„æ˜¾ç¤ºå’Œæµ‹é‡ç”¨çš„å‡½æ•°ã€‚æ—¥å†çš„è®¡ç®—é‡‡ç”¨çš„æ˜¯å…¬å†ã€‚</p>
<blockquote>
<p>æ—¶é—´ç±»å‹</p>
</blockquote>
<p>time.Timeç±»å‹è¡¨ç¤ºæ—¶é—´ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡time.Now()å‡½æ•°è·å–å½“å‰çš„æ—¶é—´å¯¹è±¡ï¼Œç„¶åè·å–æ—¶é—´å¯¹è±¡çš„å¹´æœˆæ—¥æ—¶åˆ†ç§’ç­‰ä¿¡æ¯ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">timeDemo</span>() {
</span></span><span style="display:flex;"><span>    now <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">Now</span>() <span style="color:#78787e">//è·å–å½“å‰æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;current time:%v\n&#34;</span>, now)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    year <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Year</span>()     <span style="color:#78787e">//å¹´
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    month <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Month</span>()   <span style="color:#78787e">//æœˆ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    day <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Day</span>()       <span style="color:#78787e">//æ—¥
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    hour <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Hour</span>()     <span style="color:#78787e">//å°æ—¶
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    minute <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Minute</span>() <span style="color:#78787e">//åˆ†é’Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    second <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Second</span>() <span style="color:#78787e">//ç§’
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;%d-%02d-%02d %02d:%02d:%02d\n&#34;</span>, year, month, day, hour, minute, second)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>æ—¶é—´æˆ³</p>
</blockquote>
<p>æ—¶é—´æˆ³æ˜¯è‡ª1970å¹´1æœˆ1æ—¥ï¼ˆ08:00:00GMTï¼‰è‡³å½“å‰æ—¶é—´çš„æ€»æ¯«ç§’æ•°ã€‚å®ƒä¹Ÿè¢«ç§°ä¸ºUnixæ—¶é—´æˆ³ï¼ˆUnixTimestampï¼‰ã€‚</p>
<p>åŸºäºæ—¶é—´å¯¹è±¡è·å–æ—¶é—´æˆ³çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">timestampDemo</span>() {
</span></span><span style="display:flex;"><span>    now <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">Now</span>()            <span style="color:#78787e">//è·å–å½“å‰æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    timestamp1 <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Unix</span>()     <span style="color:#78787e">//æ—¶é—´æˆ³
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    timestamp2 <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">UnixNano</span>() <span style="color:#78787e">//çº³ç§’æ—¶é—´æˆ³
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;current timestamp1:%v\n&#34;</span>, timestamp1)
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;current timestamp2:%v\n&#34;</span>, timestamp2)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä½¿ç”¨time.Unix()å‡½æ•°å¯ä»¥å°†æ—¶é—´æˆ³è½¬ä¸ºæ—¶é—´æ ¼å¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">timestampDemo2</span>(timestamp <span style="color:#9aedfe">int64</span>) {
</span></span><span style="display:flex;"><span>    timeObj <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">Unix</span>(timestamp, <span style="color:#ff9f43">0</span>) <span style="color:#78787e">//å°†æ—¶é—´æˆ³è½¬ä¸ºæ—¶é—´æ ¼å¼
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Println</span>(timeObj)
</span></span><span style="display:flex;"><span>    year <span style="color:#ff6ac1">:=</span> timeObj.<span style="color:#57c7ff">Year</span>()     <span style="color:#78787e">//å¹´
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    month <span style="color:#ff6ac1">:=</span> timeObj.<span style="color:#57c7ff">Month</span>()   <span style="color:#78787e">//æœˆ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    day <span style="color:#ff6ac1">:=</span> timeObj.<span style="color:#57c7ff">Day</span>()       <span style="color:#78787e">//æ—¥
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    hour <span style="color:#ff6ac1">:=</span> timeObj.<span style="color:#57c7ff">Hour</span>()     <span style="color:#78787e">//å°æ—¶
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    minute <span style="color:#ff6ac1">:=</span> timeObj.<span style="color:#57c7ff">Minute</span>() <span style="color:#78787e">//åˆ†é’Ÿ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    second <span style="color:#ff6ac1">:=</span> timeObj.<span style="color:#57c7ff">Second</span>() <span style="color:#78787e">//ç§’
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;%d-%02d-%02d %02d:%02d:%02d\n&#34;</span>, year, month, day, hour, minute, second)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>æ—¶é—´é—´éš”</p>
</blockquote>
<p>time.Durationæ˜¯timeåŒ…å®šä¹‰çš„ä¸€ä¸ªç±»å‹ï¼Œå®ƒä»£è¡¨ä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´ç»è¿‡çš„æ—¶é—´ï¼Œä»¥çº³ç§’ä¸ºå•ä½ã€‚time.Durationè¡¨ç¤ºä¸€æ®µæ—¶é—´é—´éš”ï¼Œå¯è¡¨ç¤ºçš„æœ€é•¿æ—¶é—´æ®µå¤§çº¦290å¹´ã€‚</p>
<p>timeåŒ…ä¸­å®šä¹‰çš„æ—¶é—´é—´éš”ç±»å‹çš„å¸¸é‡å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">const</span> (
</span></span><span style="display:flex;"><span>    Nanosecond  Duration = <span style="color:#ff9f43">1</span>
</span></span><span style="display:flex;"><span>    Microsecond          = <span style="color:#ff9f43">1000</span> <span style="color:#ff6ac1">*</span> Nanosecond
</span></span><span style="display:flex;"><span>    Millisecond          = <span style="color:#ff9f43">1000</span> <span style="color:#ff6ac1">*</span> Microsecond
</span></span><span style="display:flex;"><span>    Second               = <span style="color:#ff9f43">1000</span> <span style="color:#ff6ac1">*</span> Millisecond
</span></span><span style="display:flex;"><span>    Minute               = <span style="color:#ff9f43">60</span> <span style="color:#ff6ac1">*</span> Second
</span></span><span style="display:flex;"><span>    Hour                 = <span style="color:#ff9f43">60</span> <span style="color:#ff6ac1">*</span> Minute
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>ä¾‹å¦‚ï¼štime.Durationè¡¨ç¤º1çº³ç§’ï¼Œtime.Secondè¡¨ç¤º1ç§’ã€‚</p>
<blockquote>
<p>æ—¶é—´æ“ä½œ</p>
</blockquote>
<p>1ã€Add</p>
<p>æˆ‘ä»¬åœ¨æ—¥å¸¸çš„ç¼–ç è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°è¦æ±‚æ—¶é—´+æ—¶é—´é—´éš”çš„éœ€æ±‚ï¼ŒGoè¯­è¨€çš„æ—¶é—´å¯¹è±¡æœ‰æä¾›Addæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    func (t Time) Add(d Duration) Time
</span></span></code></pre></div><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ±‚ä¸€ä¸ªå°æ—¶ä¹‹åçš„æ—¶é—´ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>    now <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">Now</span>()
</span></span><span style="display:flex;"><span>    later <span style="color:#ff6ac1">:=</span> now.<span style="color:#57c7ff">Add</span>(time.Hour) <span style="color:#78787e">// å½“å‰æ—¶é—´åŠ 1å°æ—¶åçš„æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Println</span>(later)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>2ã€Sub</p>
<p>æ±‚ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„å·®å€¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    func (t Time) Sub(u Time) Duration
</span></span></code></pre></div><p>è¿”å›ä¸€ä¸ªæ—¶é—´æ®µt-uã€‚å¦‚æœç»“æœè¶…å‡ºäº†Durationå¯ä»¥è¡¨ç¤ºçš„æœ€å¤§å€¼/æœ€å°å€¼ï¼Œå°†è¿”å›æœ€å¤§å€¼/æœ€å°å€¼ã€‚è¦è·å–æ—¶é—´ç‚¹t-dï¼ˆdä¸ºDurationï¼‰ï¼Œå¯ä»¥ä½¿ç”¨t.Add(-d)ã€‚</p>
<p>3ã€Equal</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    func (t Time) Equal(u Time) bool
</span></span></code></pre></div><p>åˆ¤æ–­ä¸¤ä¸ªæ—¶é—´æ˜¯å¦ç›¸åŒï¼Œä¼šè€ƒè™‘æ—¶åŒºçš„å½±å“ï¼Œå› æ­¤ä¸åŒæ—¶åŒºæ ‡å‡†çš„æ—¶é—´ä¹Ÿå¯ä»¥æ­£ç¡®æ¯”è¾ƒã€‚æœ¬æ–¹æ³•å’Œç”¨t==uä¸åŒï¼Œè¿™ç§æ–¹æ³•è¿˜ä¼šæ¯”è¾ƒåœ°ç‚¹å’Œæ—¶åŒºä¿¡æ¯ã€‚</p>
<p>4ã€Before</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    func (t Time) Before(u Time) bool
</span></span></code></pre></div><p>å¦‚æœtä»£è¡¨çš„æ—¶é—´ç‚¹åœ¨uä¹‹å‰ï¼Œè¿”å›çœŸï¼›å¦åˆ™è¿”å›å‡ã€‚</p>
<p>5ã€After</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>    func (t Time) After(u Time) bool
</span></span></code></pre></div><p>å¦‚æœtä»£è¡¨çš„æ—¶é—´ç‚¹åœ¨uä¹‹åï¼Œè¿”å›çœŸï¼›å¦åˆ™è¿”å›å‡ã€‚</p>
<blockquote>
<p>1.1.6. å®šæ—¶å™¨</p>
</blockquote>
<p>ä½¿ç”¨time.Tick(æ—¶é—´é—´éš”)æ¥è®¾ç½®å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šé“ï¼ˆchannelï¼‰ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">tickDemo</span>() {
</span></span><span style="display:flex;"><span>    ticker <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">Tick</span>(time.Second) <span style="color:#78787e">//å®šä¹‰ä¸€ä¸ª1ç§’é—´éš”çš„å®šæ—¶å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    <span style="color:#ff6ac1">for</span> i <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> ticker {
</span></span><span style="display:flex;"><span>        fmt.<span style="color:#57c7ff">Println</span>(i)<span style="color:#78787e">//æ¯ç§’éƒ½ä¼šæ‰§è¡Œçš„ä»»åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>1.1.7. æ—¶é—´æ ¼å¼åŒ–</p>
</blockquote>
<p>æ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªè‡ªå¸¦çš„æ–¹æ³•Formatè¿›è¡Œæ ¼å¼åŒ–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯Goè¯­è¨€ä¸­æ ¼å¼åŒ–æ—¶é—´æ¨¡æ¿ä¸æ˜¯å¸¸è§çš„Y-m-d H:M:Sè€Œæ˜¯ä½¿ç”¨Goçš„è¯ç”Ÿæ—¶é—´2006å¹´1æœˆ2å·15ç‚¹04åˆ†ï¼ˆè®°å¿†å£è¯€ä¸º2006 1 2 3 4ï¼‰ã€‚ä¹Ÿè®¸è¿™å°±æ˜¯æŠ€æœ¯äººå‘˜çš„æµªæ¼«å§ã€‚</p>
<p>è¡¥å……ï¼šå¦‚æœæƒ³æ ¼å¼åŒ–ä¸º12å°æ—¶æ–¹å¼ï¼Œéœ€æŒ‡å®šPMã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">formatDemo</span>() {
</span></span><span style="display:flex;"><span>    now <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">Now</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#78787e">// æ ¼å¼åŒ–çš„æ¨¡æ¿ä¸ºGoçš„å‡ºç”Ÿæ—¶é—´2006å¹´1æœˆ2å·15ç‚¹04åˆ† Mon Jan
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    <span style="color:#78787e">// 24å°æ—¶åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Println</span>(now.<span style="color:#57c7ff">Format</span>(<span style="color:#5af78e">&#34;2006-01-02 15:04:05.000 Mon Jan&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#78787e">// 12å°æ—¶åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>    fmt.<span style="color:#57c7ff">Println</span>(now.<span style="color:#57c7ff">Format</span>(<span style="color:#5af78e">&#34;2006-01-02 03:04:05.000 PM Mon Jan&#34;</span>))
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(now.<span style="color:#57c7ff">Format</span>(<span style="color:#5af78e">&#34;2006/01/02 15:04&#34;</span>))
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(now.<span style="color:#57c7ff">Format</span>(<span style="color:#5af78e">&#34;15:04 2006/01/02&#34;</span>))
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(now.<span style="color:#57c7ff">Format</span>(<span style="color:#5af78e">&#34;2006/01/02&#34;</span>))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#78787e">    2022-12-01 08:30:47.872 Fri Dec
</span></span></span><span style="display:flex;"><span><span style="color:#78787e">    2022-12-01 08:30:47.872 AM Fri Dec
</span></span></span><span style="display:flex;"><span><span style="color:#78787e">    2022/12/01 08:30
</span></span></span><span style="display:flex;"><span><span style="color:#78787e">    08:30 2022/12/01
</span></span></span><span style="display:flex;"><span><span style="color:#78787e">    2022/12/01
</span></span></span><span style="display:flex;"><span><span style="color:#78787e">*/</span>
</span></span></code></pre></div><blockquote>
<p>è§£æå­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;time&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#78787e">// åŠ è½½æ—¶åŒº
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>	loc, err <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">LoadLocation</span>(<span style="color:#5af78e">&#34;Asia/Shanghai&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">if</span> err <span style="color:#ff6ac1">!=</span> <span style="color:#ff6ac1">nil</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#57c7ff">Println</span>(err)
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">return</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#78787e">// æŒ‰ç…§æŒ‡å®šæ—¶åŒºå’ŒæŒ‡å®šæ ¼å¼è§£æå­—ç¬¦ä¸²æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>	timeObj, err <span style="color:#ff6ac1">:=</span> time.<span style="color:#57c7ff">ParseInLocation</span>(<span style="color:#5af78e">&#34;æ—¥æœŸï¼š2006/01/02 æ—¶é—´ï¼š 15:04:05&#34;</span>, <span style="color:#5af78e">&#34;æ—¥æœŸï¼š2019/08/04 æ—¶é—´ï¼š 14:15:20&#34;</span>, loc)
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">if</span> err <span style="color:#ff6ac1">!=</span> <span style="color:#ff6ac1">nil</span> {
</span></span><span style="display:flex;"><span>		fmt.<span style="color:#57c7ff">Println</span>(err)
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">return</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	fmt.<span style="color:#57c7ff">Println</span>(timeObj)
</span></span><span style="display:flex;"><span>  <span style="color:#78787e">// 2019-08-04 14:15:20 +0800 CST
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>}
</span></span></code></pre></div><h1 id="éå†-map-çš„æ—¶å€™å¯ä»¥åˆ é™¤å—">éå† map çš„æ—¶å€™å¯ä»¥åˆ é™¤å—ï¼Ÿ<a hidden class="anchor" aria-hidden="true" href="#éå†-map-çš„æ—¶å€™å¯ä»¥åˆ é™¤å—">#</a></h1>
<p>Goè¯­è¨€è§„èŒƒå…è®¸åœ¨éå†mapçš„è¿‡ç¨‹ä¸­åˆ é™¤å…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºmapåœ¨Goè¯­è¨€ä¸­æ˜¯æ— åºçš„ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ åä¸ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> <span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>    myMap <span style="color:#ff6ac1">:=</span> <span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>{<span style="color:#5af78e">&#34;a&#34;</span>: <span style="color:#ff9f43">1</span>, <span style="color:#5af78e">&#34;b&#34;</span>: <span style="color:#ff9f43">2</span>, <span style="color:#5af78e">&#34;c&#34;</span>: <span style="color:#ff9f43">3</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff6ac1">for</span> key <span style="color:#ff6ac1">:=</span> <span style="color:#ff6ac1">range</span> myMap {
</span></span><span style="display:flex;"><span>        <span style="color:#ff6ac1">if</span> key <span style="color:#ff6ac1">==</span> <span style="color:#5af78e">&#34;a&#34;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#ff5c57">delete</span>(myMap, key)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    fmt.<span style="color:#57c7ff">Println</span>(myMap)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿™ä¸ªä»£ç ç‰‡æ®µå°†æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå¯¼è‡´panicã€‚åœ¨éå†è¿‡ç¨‹ä¸­åˆ é™¤å…ƒç´ åï¼Œmapçš„è¿­ä»£å™¨ä»ç„¶æœ‰æ•ˆï¼Œå› ä¸ºmapçš„éå†é¡ºåºæ˜¯æ— åºçš„ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ ä¸ä¼šå½±å“åç»­çš„è¿­ä»£ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœåœ¨å¤šåç¨‹ä¸‹ï¼Œç”±äº map å¹¶ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æ„ã€‚åŒæ—¶è¯»å†™ä¸€ä¸ª map æ˜¯æœªå®šä¹‰çš„è¡Œä¸ºï¼Œå¦‚æœè¢«æ£€æµ‹åˆ°ï¼Œä¼šç›´æ¥ panicã€‚</p>
<p>ä¸Šé¢è¯´çš„æ˜¯å‘ç”Ÿåœ¨å¤šä¸ªåç¨‹åŒæ—¶è¯»å†™åŒä¸€ä¸ª map çš„æƒ…å†µä¸‹ã€‚ å¦‚æœåœ¨åŒä¸€ä¸ªåç¨‹å†…è¾¹éå†è¾¹åˆ é™¤ï¼Œå¹¶ä¸ä¼šæ£€æµ‹åˆ°åŒæ—¶è¯»å†™ï¼Œç†è®ºä¸Šæ˜¯å¯ä»¥è¿™æ ·åšçš„ã€‚ä½†æ˜¯ï¼Œéå†çš„ç»“æœå°±å¯èƒ½ä¸ä¼šæ˜¯ç›¸åŒçš„äº†ï¼Œæœ‰å¯èƒ½ç»“æœéå†ç»“æœé›†ä¸­åŒ…å«äº†åˆ é™¤çš„ keyï¼Œä¹Ÿæœ‰å¯èƒ½ä¸åŒ…å«ï¼Œè¿™å–å†³äºåˆ é™¤ key çš„æ—¶é—´ï¼šæ˜¯åœ¨éå†åˆ° key æ‰€åœ¨çš„ bucket æ—¶åˆ»å‰æˆ–è€…åã€‚</p>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>
<p>è¿™å¯ä»¥é€šè¿‡è¯»å†™é”æ¥è§£å†³ï¼šsync.RWMutexã€‚è¯»ä¹‹å‰è°ƒç”¨ RLock() å‡½æ•°ï¼Œè¯»å®Œä¹‹åè°ƒç”¨ RUnlock() å‡½æ•°è§£é”ï¼›å†™ä¹‹å‰è°ƒç”¨ Lock() å‡½æ•°ï¼Œå†™å®Œä¹‹åï¼Œè°ƒç”¨ Unlock() è§£é”ã€‚</p>
</li>
<li>
<p>å¦å¤–ï¼Œsync.Map æ˜¯çº¿ç¨‹å®‰å…¨çš„ mapï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p>
</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç¤ºä¾‹ï¼Œç„¶ååˆ†åˆ«ä½¿ç”¨ä¸¤ç§æ–¹å¼å»è§£å†³å®ƒ</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;strconv&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">var</span> m = <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">get</span>(key <span style="color:#9aedfe">string</span>) <span style="color:#9aedfe">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">return</span> m[key]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">set</span>(key <span style="color:#9aedfe">string</span>, value <span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>	m[key] = value
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	wg <span style="color:#ff6ac1">:=</span> sync.WaitGroup{}
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">for</span> i <span style="color:#ff6ac1">:=</span> <span style="color:#ff9f43">0</span>; i &lt; <span style="color:#ff9f43">100</span>; i<span style="color:#ff6ac1">++</span> {
</span></span><span style="display:flex;"><span>		wg.<span style="color:#57c7ff">Add</span>(<span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">go</span> <span style="color:#ff5c57">func</span>(n <span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>			key <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">Itoa</span>(n)
</span></span><span style="display:flex;"><span>			<span style="color:#57c7ff">set</span>(key, n)
</span></span><span style="display:flex;"><span>			fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;k=:%v, v:=%v\n&#34;</span>, key, <span style="color:#57c7ff">get</span>(key))
</span></span><span style="display:flex;"><span>			wg.<span style="color:#57c7ff">Done</span>()
</span></span><span style="display:flex;"><span>		}(i)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	wg.<span style="color:#57c7ff">Wait</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>......
</span></span><span style="display:flex;"><span>k=:66,v:=66
</span></span><span style="display:flex;"><span>k=:43,v:=43
</span></span><span style="display:flex;"><span>k=:44,v:=44
</span></span><span style="display:flex;"><span>......
</span></span><span style="display:flex;"><span>k=:49,v:=49
</span></span><span style="display:flex;"><span>k=:50,v:=50
</span></span><span style="display:flex;"><span>k=:51,v:=51
</span></span><span style="display:flex;"><span>fatal error: concurrent map writes
</span></span><span style="display:flex;"><span>fatal error: concurrent map writes
</span></span><span style="display:flex;"><span>fatal error: concurrent map writes
</span></span></code></pre></div><p>æˆ‘ä»¬ä¸èƒ½åœ¨å¤šä¸ª goroutine ä¸­å¹¶å‘å¯¹å†…ç½®çš„ map è¿›è¡Œè¯»å†™æ“ä½œï¼Œå¦åˆ™ä¼šå­˜åœ¨æ•°æ®ç«äº‰é—®é¢˜ã€‚</p>
<p>åƒè¿™ç§åœºæ™¯ä¸‹å°±éœ€è¦ä¸º map åŠ é”æ¥ä¿è¯å¹¶å‘çš„å®‰å…¨æ€§äº†ï¼ŒGoè¯­è¨€çš„<code>sync</code>åŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å¹¶å‘å®‰å…¨ç‰ˆ mapâ€”â€”<code>sync.Map</code>ã€‚å¼€ç®±å³ç”¨è¡¨ç¤ºå…¶ä¸ç”¨åƒå†…ç½®çš„ map ä¸€æ ·ä½¿ç”¨ make å‡½æ•°åˆå§‹åŒ–å°±èƒ½ç›´æ¥ä½¿ç”¨ã€‚åŒæ—¶<code>sync.Map</code>å†…ç½®äº†è¯¸å¦‚<code>Store</code>ã€<code>Load</code>ã€<code>LoadOrStore</code>ã€<code>Delete</code>ã€<code>Range</code>ç­‰æ“ä½œæ–¹æ³•ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ–¹æ³•å</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">func (m *Map) Store(key, value interface{})</td>
<td style="text-align:center">å­˜å‚¨key-valueæ•°æ®</td>
</tr>
<tr>
<td style="text-align:center">func (m *Map) Load(key interface{}) (value interface{}, ok bool)</td>
<td style="text-align:center">æŸ¥è¯¢keyå¯¹åº”çš„value</td>
</tr>
<tr>
<td style="text-align:center">func (m *Map) LoadOrStore(key, value interface{}) (actual interface{}, loaded bool)</td>
<td style="text-align:center">æŸ¥è¯¢æˆ–å­˜å‚¨keyå¯¹åº”çš„value</td>
</tr>
<tr>
<td style="text-align:center">func (m *Map) LoadAndDelete(key interface{}) (value interface{}, loaded bool)</td>
<td style="text-align:center">æŸ¥è¯¢å¹¶åˆ é™¤key</td>
</tr>
<tr>
<td style="text-align:center">func (m *Map) Delete(key interface{})</td>
<td style="text-align:center">åˆ é™¤key</td>
</tr>
<tr>
<td style="text-align:center">func (m *Map) Range(f func(key, value interface{}) bool)</td>
<td style="text-align:center">å¯¹mapä¸­çš„æ¯ä¸ªkey-valueä¾æ¬¡è°ƒç”¨f</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å¹¶å‘è¯»å†™<code>sync.Map</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;strconv&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#78787e">// å¹¶å‘å®‰å…¨çš„map
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span><span style="color:#ff5c57">var</span> m = sync.Map{}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	wg <span style="color:#ff6ac1">:=</span> sync.WaitGroup{}
</span></span><span style="display:flex;"><span>	<span style="color:#78787e">// å¯¹mæ‰§è¡Œ20ä¸ªå¹¶å‘çš„è¯»å†™æ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>	<span style="color:#ff6ac1">for</span> i <span style="color:#ff6ac1">:=</span> <span style="color:#ff9f43">0</span>; i &lt; <span style="color:#ff9f43">20</span>; i<span style="color:#ff6ac1">++</span> {
</span></span><span style="display:flex;"><span>		wg.<span style="color:#57c7ff">Add</span>(<span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">go</span> <span style="color:#ff5c57">func</span>(n <span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>			key <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">Itoa</span>(n)
</span></span><span style="display:flex;"><span>			m.<span style="color:#57c7ff">Store</span>(key, n)         <span style="color:#78787e">// å­˜å‚¨key-value
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>			value, _ <span style="color:#ff6ac1">:=</span> m.<span style="color:#57c7ff">Load</span>(key) <span style="color:#78787e">// æ ¹æ®keyå–å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#78787e"></span>			fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;k=:%v,v:=%v\n&#34;</span>, key, value)
</span></span><span style="display:flex;"><span>			wg.<span style="color:#57c7ff">Done</span>()
</span></span><span style="display:flex;"><span>		}(i)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	wg.<span style="color:#57c7ff">Wait</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä½¿ç”¨ é”</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#ff6ac1">package</span> main
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff6ac1">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;strconv&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#5af78e">&#34;sync&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">var</span> mu sync.RWMutex
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">var</span> m = <span style="color:#ff5c57">make</span>(<span style="color:#ff5c57">map</span>[<span style="color:#9aedfe">string</span>]<span style="color:#9aedfe">int</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">get</span>(key <span style="color:#9aedfe">string</span>) <span style="color:#9aedfe">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">return</span> m[key]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">set</span>(key <span style="color:#9aedfe">string</span>, value <span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>	m[key] = value
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff5c57">func</span> <span style="color:#57c7ff">main</span>() {
</span></span><span style="display:flex;"><span>	wg <span style="color:#ff6ac1">:=</span> sync.WaitGroup{}
</span></span><span style="display:flex;"><span>	<span style="color:#ff6ac1">for</span> i <span style="color:#ff6ac1">:=</span> <span style="color:#ff9f43">0</span>; i &lt; <span style="color:#ff9f43">80</span>; i<span style="color:#ff6ac1">++</span> {
</span></span><span style="display:flex;"><span>		wg.<span style="color:#57c7ff">Add</span>(<span style="color:#ff9f43">1</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#ff6ac1">go</span> <span style="color:#ff5c57">func</span>(n <span style="color:#9aedfe">int</span>) {
</span></span><span style="display:flex;"><span>			key <span style="color:#ff6ac1">:=</span> strconv.<span style="color:#57c7ff">Itoa</span>(n)
</span></span><span style="display:flex;"><span>			mu.<span style="color:#57c7ff">Lock</span>()
</span></span><span style="display:flex;"><span>			<span style="color:#57c7ff">set</span>(key, n)
</span></span><span style="display:flex;"><span>			mu.<span style="color:#57c7ff">Unlock</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			mu.<span style="color:#57c7ff">RLock</span>()
</span></span><span style="display:flex;"><span>			fmt.<span style="color:#57c7ff">Printf</span>(<span style="color:#5af78e">&#34;k=:%v, v:=%v\n&#34;</span>, key, <span style="color:#57c7ff">get</span>(key))
</span></span><span style="display:flex;"><span>			mu.<span style="color:#57c7ff">RUnlock</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			wg.<span style="color:#57c7ff">Done</span>()
</span></span><span style="display:flex;"><span>		}(i)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	wg.<span style="color:#57c7ff">Wait</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="map-çš„æ‰©å®¹å’Œæ”¶ç¼©å®¹é‡">map çš„æ‰©å®¹å’Œæ”¶ç¼©å®¹é‡<a hidden class="anchor" aria-hidden="true" href="#map-çš„æ‰©å®¹å’Œæ”¶ç¼©å®¹é‡">#</a></h1>


        </div>
        <div class="post-reward">
            <div style="padding: 0 0 0 0; margin: 0 0 0 0; width: 100%; font-size:16px; text-align: center;">
                <div id="QR" style="opacity: 0;">
                    <div id="wechat" style="display: inline-block">
                        <a class="fancybox" rel="group">
                            <img id="wechat_qr" src="https://Bin-lin-rgb.github.io/img/wechat_pay.png" alt="wechat_pay"></a>
                        <p>å¾®ä¿¡</p>
                    </div>
                    <div id="alipay" style="display: inline-block">
                        <a class="fancybox" rel="group">
                            <img id="alipay_qr" src="https://Bin-lin-rgb.github.io/img/alipay.png" alt="alipay"></a>
                        <p>æ”¯ä»˜å®</p>
                    </div>
                </div>
                <button id="rewardButton"
                        onclick="
                    var qr = document.getElementById('QR');
                    if (qr.style.opacity === '0') {
                        qr.style.opacity='1';
                    } else {
                        qr.style.opacity='0'
                    }"
                >
                    <span>ğŸ§§ é¼“åŠ±</span>
                </button>
            </div>
        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://Bin-lin-rgb.github.io/posts/leetcode/%E5%8F%8C%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>åŒæŒ‡é’ˆï¼ˆæ•°ç»„ï¼‰</span>
  </a>
  <a class="next" href="https://Bin-lin-rgb.github.io/posts/leetcode/%E5%8F%8C%E6%8C%87%E9%92%88%E9%93%BE%E8%A1%A8/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>åŒæŒ‡é’ˆï¼ˆé“¾è¡¨ï¼‰</span>
  </a>
</nav>

        </footer>
    </div>

<style>
    .comments_details summary::marker {
        font-size: 20px;
        content: 'ğŸ‘‰å±•å¼€è¯„è®º';
        color: var(--content);
    }
    .comments_details[open] summary::marker{
        font-size: 20px;
        content: 'ğŸ‘‡å…³é—­è¯„è®º';
        color: var(--content);
    }
</style>


<div>
    <details class="comments_details">
        <summary style="cursor: pointer; margin: 50px 0 20px 0;width: 130px;">
            <span style="font-size: 20px;color: var(--content);">...</span>
        </summary>
        <div id="tcomment"></div>
    </details>
    <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js">
    </script>
    <script>
        twikoo.init({
            envId: 'https://twikoo-api-nine-silk.vercel.app/',
            el: "#tcomment",
            lang: 'zh-CN',
            region: 'ap-guangzhou',
            path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        })
    
    
    
    
    
    
    
    </script>
</div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        2021-2023
        <a href="https://Bin-lin-rgb.github.io/" style="color:#939393;">Blaine&#39;s Blog</a>
        All Rights Reserved
    </span>
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;">å¤‡æ¡ˆå·</a>&nbsp;
    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="%e5%85%ac%e5%ae%89%e5%9b%be%e6%a0%87%e9%93%be%e6%8e%a5" style="float:left;margin: 0px 5px 0px 0px;"/>
            å…¬ç½‘å®‰å¤‡
        </a>
    </span>
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ'+"Blaine's Blog"+'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ'+"Blaine's Blog"+'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'å¤åˆ¶';

        function copyingDone() {
            copybutton.innerText = 'å·²å¤åˆ¶ï¼';
            setTimeout(() => {
                copybutton.innerText = 'å¤åˆ¶';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ'+"Blaine's Blog"+'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>
</body>

</html>
